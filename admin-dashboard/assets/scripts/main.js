/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.16 Copyright (c) 2010-2015, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/**
 * jQuery serializeObject
 * @copyright 2014, macek <paulmacek@gmail.com>
 * @link https://github.com/macek/jquery-serialize-object
 * @license BSD
 * @version 2.4.5
 */

/**
 * @license
 * lodash 3.5.0 (Custom Build) lodash.com/license | Underscore.js 1.8.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */

//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */

(function(){var requirejs,require,define;(function(global){function isFunction(e){return ostring.call(e)==="[object Function]"}function isArray(e){return ostring.call(e)==="[object Array]"}function each(e,t){if(e){var n;for(n=0;n<e.length;n+=1)if(e[n]&&t(e[n],n,e))break}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1;n-=1)if(e[n]&&t(e[n],n,e))break}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){if(n||!hasProp(e,i))r&&typeof t=="object"&&t&&!isArray(t)&&!isFunction(t)&&!(t instanceof RegExp)?(e[i]||(e[i]={}),mixin(e[i],t,n,r)):e[i]=t}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function m(e){var t,n;for(t=0;t<e.length;t++){n=e[t];if(n===".")e.splice(t,1),t-=1;else if(n===".."){if(t===0||t==1&&e[2]===".."||e[t-1]==="..")continue;t>0&&(e.splice(t-1,2),t-=2)}}}function g(e,t,n){var r,i,s,u,a,f,l,c,h,p,d,v,g=t&&t.split("/"),y=o.map,b=y&&y["*"];e&&(e=e.split("/"),l=e.length-1,o.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e[0].charAt(0)==="."&&g&&(v=g.slice(0,g.length-1),e=v.concat(e)),m(e),e=e.join("/"));if(n&&y&&(g||b)){s=e.split("/");e:for(u=s.length;u>0;u-=1){f=s.slice(0,u).join("/");if(g)for(a=g.length;a>0;a-=1){i=getOwn(y,g.slice(0,a).join("/"));if(i){i=getOwn(i,f);if(i){c=i,h=u;break e}}}!p&&b&&getOwn(b,f)&&(p=getOwn(b,f),d=u)}!c&&p&&(c=p,h=d),c&&(s.splice(0,h,c),e=s.join("/"))}return r=getOwn(o.pkgs,e),r?r:e}function y(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===r.contextName)return t.parentNode.removeChild(t),!0})}function b(e){var t=getOwn(o.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),r.require.undef(e),r.makeRequire(null,{skipMap:!0})([e]),!0}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e,t,n,i){var s,o,u,a,f=null,l=t?t.name:null,h=e,p=!0,m="";return e||(p=!1,e="_@r"+(d+=1)),a=w(e),f=a[0],e=a[1],f&&(f=g(f,l,i),o=getOwn(c,f)),e&&(f?o&&o.normalize?m=o.normalize(e,function(e){return g(e,l,i)}):m=e.indexOf("!")===-1?g(e,l,i):e:(m=g(e,l,i),a=w(m),f=a[0],m=a[1],n=!0,s=r.nameToUrl(m))),u=f&&!o&&!n?"_unnormalized"+(v+=1):"",{prefix:f,name:m,parentMap:t,unnormalized:!!u,url:s,originalName:h,isDefine:p,id:(f?f+"!"+m:m)+u}}function S(e){var t=e.id,n=getOwn(u,t);return n||(n=u[t]=new r.Module(e)),n}function x(e,t,n){var r=e.id,i=getOwn(u,r);hasProp(c,r)&&(!i||i.defineEmitComplete)?t==="defined"&&n(c[r]):(i=S(e),i.error&&t==="error"?n(i.error):i.on(t,n))}function T(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(u,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function N(){globalDefQueue.length&&(apsp.apply(l,[l.length,0].concat(globalDefQueue)),globalDefQueue=[])}function C(e){delete u[e],delete a[e]}function k(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var s=r.id,o=getOwn(u,s);o&&!e.depMatched[i]&&!n[s]&&(getOwn(t,s)?(e.defineDep(i,c[s]),e.check()):k(o,t,n))}),n[r]=!0)}function L(){var e,n,i=o.waitSeconds*1e3,u=i&&r.startTime+i<(new Date).getTime(),f=[],l=[],c=!1,h=!0;if(t)return;t=!0,eachProp(a,function(e){var t=e.map,r=t.id;if(!e.enabled)return;t.isDefine||l.push(e);if(!e.error)if(!e.inited&&u)b(r)?(n=!0,c=!0):(f.push(r),y(r));else if(!e.inited&&e.fetched&&t.isDefine){c=!0;if(!t.prefix)return h=!1}});if(u&&f.length)return e=makeError("timeout","Load timeout for modules: "+f,null,f),e.contextName=r.contextName,T(e);h&&each(l,function(e){k(e,{},{})}),(!u||n)&&c&&(isBrowser||isWebWorker)&&!s&&(s=setTimeout(function(){s=0,L()},50)),t=!1}function A(e){hasProp(c,e[0])||S(E(e[0],null,!0)).init(e[1],e[2])}function O(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function M(e){var t=e.currentTarget||e.srcElement;return O(t,r.onScriptLoad,"load","onreadystatechange"),O(t,r.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function _(){var e;N();while(l.length){e=l.shift();if(e[0]===null)return T(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));A(e)}}var t,n,r,i,s,o={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},u={},a={},f={},l=[],c={},h={},p={},d=1,v=1;return i={require:function(e){return e.require?e.require:e.require=r.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?c[e.map.id]=e.exports:e.exports=c[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(o.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},n=function(e){this.events=getOwn(f,e.id)||{},this.map=e,this.shim=getOwn(o.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},n.prototype={init:function(e,t,n,r){r=r||{};if(this.inited)return;this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check()},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(this.fetched)return;this.fetched=!0,r.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();r.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))},load:function(){var e=this.map.url;h[e]||(h[e]=!0,r.load(this.map.id,e))},check:function(){if(!this.enabled||this.enabling)return;var e,t,n=this.map.id,i=this.depExports,s=this.exports,o=this.factory;if(!this.inited)this.fetch();else if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{s=r.execCb(n,o,i,s)}catch(u){e=u}else s=r.execCb(n,o,i,s);this.map.isDefine&&s===undefined&&(t=this.module,t?s=t.exports:this.usingExports&&(s=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",T(this.error=e)}else s=o;this.exports=s,this.map.isDefine&&!this.ignore&&(c[n]=s,req.onResourceLoad&&req.onResourceLoad(r,this.map,this.depMaps)),C(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}},callPlugin:function(){var e=this.map,t=e.id,n=E(e.prefix);this.depMaps.push(n),x(n,"defined",bind(this,function(n){var i,s,a,f=getOwn(p,this.map.id),l=this.map.name,c=this.map.parentMap?this.map.parentMap.name:null,h=r.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){n.normalize&&(l=n.normalize(l,function(e){return g(e,c,!0)})||""),s=E(e.prefix+"!"+l,this.map.parentMap),x(s,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),a=getOwn(u,s.id),a&&(this.depMaps.push(s),this.events.error&&a.on("error",bind(this,function(e){this.emit("error",e)})),a.enable());return}if(f){this.map.url=r.nameToUrl(f),this.load();return}i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(u,function(e){e.map.id.indexOf(t+"_unnormalized")===0&&C(e.map.id)}),T(e)}),i.fromText=bind(this,function(n,s){var u=e.name,a=E(u),f=useInteractive;s&&(n=s),f&&(useInteractive=!1),S(a),hasProp(o.config,t)&&(o.config[u]=o.config[t]);try{req.exec(n)}catch(l){return T(makeError("fromtexteval","fromText eval for "+t+" failed: "+l,l,[t]))}f&&(useInteractive=!0),this.depMaps.push(a),r.completeLoad(u),h([u],i)}),n.load(e.name,h,i,o)})),r.enable(n,this),this.pluginMaps[n.id]=n},enable:function(){a[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,s,o;if(typeof e=="string"){e=E(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,o=getOwn(i,e.id);if(o){this.depExports[t]=o(this);return}this.depCount+=1,x(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback?x(e,"error",bind(this,this.errback)):this.events.error&&x(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,s=u[n],!hasProp(i,n)&&s&&!s.enabled&&r.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(u,e.id);t&&!t.enabled&&r.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),e==="error"&&delete this.events[e]}},r={config:o,contextName:e,registry:u,defined:c,urlFetched:h,defQueue:l,Module:n,makeModuleMap:E,nextTick:req.nextTick,onError:T,configure:function(e){e.baseUrl&&e.baseUrl.charAt(e.baseUrl.length-1)!=="/"&&(e.baseUrl+="/");var t=o.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(o[t]||(o[t]={}),mixin(o[t],e,!0,!0)):o[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(p[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=r.makeShimExports(e)),t[n]=e}),o.shim=t),e.packages&&each(e.packages,function(e){var t,n;e=typeof e=="string"?{name:e}:e,n=e.name,t=e.location,t&&(o.paths[n]=e.location),o.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(u,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=E(t))}),(e.deps||e.callback)&&r.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function s(o,a,f){var l,h,p;return n.enableBuildCallback&&a&&isFunction(a)&&(a.__requireJsBuild=!0),typeof o=="string"?isFunction(a)?T(makeError("requireargs","Invalid require call"),f):t&&hasProp(i,o)?i[o](u[t.id]):req.get?req.get(r,o,t,s):(h=E(o,t,!1,!0),l=h.id,hasProp(c,l)?c[l]:T(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(_(),r.nextTick(function(){_(),p=S(E(null,t)),p.skipMap=n.skipMap,p.init(o,a,f,{enabled:!0}),L()}),s)}return n=n||{},mixin(s,{isBrowser:isBrowser,toUrl:function(e){var n,i=e.lastIndexOf("."),s=e.split("/")[0],o=s==="."||s==="..";return i!==-1&&(!o||i>1)&&(n=e.substring(i,e.length),e=e.substring(0,i)),r.nameToUrl(g(e,t&&t.id,!0),n,!0)},defined:function(e){return hasProp(c,E(e,t,!1,!0).id)},specified:function(e){return e=E(e,t,!1,!0).id,hasProp(c,e)||hasProp(u,e)}}),t||(s.undef=function(e){N();var n=E(e,t,!0),r=getOwn(u,e);y(e),delete c[e],delete h[n.url],delete f[e],eachReverse(l,function(t,n){t[0]===e&&l.splice(n,1)}),r&&(r.events.defined&&(f[e]=r.events),C(e))}),s},enable:function(e){var t=getOwn(u,e.id);t&&S(e).enable()},completeLoad:function(e){var t,n,r,i=getOwn(o.shim,e)||{},s=i.exports;N();while(l.length){n=l.shift();if(n[0]===null){n[0]=e;if(t)break;t=!0}else n[0]===e&&(t=!0);A(n)}r=getOwn(u,e);if(!t&&!hasProp(c,e)&&r&&!r.inited){if(o.enforceDefine&&(!s||!getGlobal(s))){if(b(e))return;return T(makeError("nodefine","No define call for "+e,null,[e]))}A([e,i.deps||[],i.exportsFn])}L()},nameToUrl:function(e,t,n){var i,s,u,a,f,l,c,h=getOwn(o.pkgs,e);h&&(e=h),c=getOwn(p,e);if(c)return r.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))f=e+(t||"");else{i=o.paths,s=e.split("/");for(u=s.length;u>0;u-=1){a=s.slice(0,u).join("/"),l=getOwn(i,a);if(l){isArray(l)&&(l=l[0]),s.splice(0,u,l);break}}f=s.join("/"),f+=t||(/^data\:|\?/.test(f)||n?"":".js"),f=(f.charAt(0)==="/"||f.match(/^[\w\+\.\-]+:/)?"":o.baseUrl)+f}return o.urlArgs?f+((f.indexOf("?")===-1?"?":"&")+o.urlArgs):f},load:function(e,t){req.load(r,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if(e.type==="load"||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=M(e);r.completeLoad(t.id)}},onScriptError:function(e){var t=M(e);if(!b(t.id))return T(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},r.require=r.makeRequire(),r}function getInteractiveScript(){return interactiveScript&&interactiveScript.readyState==="interactive"?interactiveScript:(eachReverse(scripts(),function(e){if(e.readyState==="interactive")return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.16",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=typeof window!="undefined"&&typeof navigator!="undefined"&&!!window.document,isWebWorker=!isBrowser&&typeof importScripts!="undefined",readyRegExp=isBrowser&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera=typeof opera!="undefined"&&opera.toString()==="[object Opera]",contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(typeof define!="undefined")return;if(typeof requirejs!="undefined"){if(isFunction(requirejs))return;cfg=requirejs,requirejs=undefined}typeof require!="undefined"&&!isFunction(require)&&(cfg=require,require=undefined),req=requirejs=function(e,t,n,r){var i,s,o=defContextName;return!isArray(e)&&typeof e!="string"&&(s=e,isArray(t)?(e=t,t=n,n=r):e=[]),s&&s.context&&(o=s.context),i=getOwn(contexts,o),i||(i=contexts[o]=req.s.newContext(o)),s&&i.configure(s),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=typeof setTimeout!="undefined"?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r=e&&e.config||{},i;if(isBrowser)return i=req.createNode(r,t,n),i.setAttribute("data-requirecontext",e.contextName),i.setAttribute("data-requiremodule",t),i.attachEvent&&!(i.attachEvent.toString&&i.attachEvent.toString().indexOf("[native code")<0)&&!isOpera?(useInteractive=!0,i.attachEvent("onreadystatechange",e.onScriptLoad)):(i.addEventListener("load",e.onScriptLoad,!1),i.addEventListener("error",e.onScriptError,!1)),i.src=n,currentlyAddingScript=i,baseElement?head.insertBefore(i,baseElement):head.appendChild(i),currentlyAddingScript=null,i;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(s){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,s,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){head||(head=e.parentNode),dataMain=e.getAttribute("data-main");if(dataMain)return mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;typeof e!="string"&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(n.length===1?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)})(this),define("../../vendor/requirejs/require",function(){}),define("jquery",[],function(){return window.jQuery}),!function(e,t){if("function"==typeof define&&define.amd)define("jquery.serialize-object",["exports","jquery"],function(e,n){return t(e,n)});else if("undefined"!=typeof exports){var n=require("jquery");t(exports,n)}else t(e,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t){function n(e,n){function i(e,t,n){return e[t]=n,e}function s(e,t){for(var n,s=e.match(r.key);void 0!==(n=s.pop());)if(r.push.test(n)){var u=o(e.replace(/\[\]$/,""));t=i([],u,t)}else r.fixed.test(n)?t=i([],n,t):r.named.test(n)&&(t=i({},n,t));return t}function o(e){return void 0===p[e]&&(p[e]=0),p[e]++}function u(e){switch(t('[name="'+e.name+'"]',n).attr("type")){case"checkbox":return"on"===e.value?!0:e.value;default:return e.value}}function a(t){if(!r.validate.test(t.name))return this;var n=s(t.name,u(t));return h=e.extend(!0,h,n),this}function f(t){if(!e.isArray(t))throw new Error("formSerializer.addPairs expects an Array");for(var n=0,r=t.length;r>n;n++)this.addPair(t[n]);return this}function l(){return h}function c(){return JSON.stringify(l())}var h={},p={};this.addPair=a,this.addPairs=f,this.serialize=l,this.serializeJSON=c}var r={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return n.patterns=r,n.serializeObject=function(){return this.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):(new n(t,this)).addPairs(this.serializeArray()).serialize()},n.serializeJSON=function(){return this.length>1?new Error("jquery-serialize-object can only serialize one form at a time"):(new n(t,this)).addPairs(this.serializeArray()).serializeJSON()},"undefined"!=typeof t.fn&&(t.fn.serializeObject=n.serializeObject,t.fn.serializeJSON=n.serializeJSON),e.FormSerializer=n,n}),function(){function e(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||typeof e=="undefined"&&r)return 1;if(e<t||!r||typeof t=="undefined"&&n)return-1}return 0}function t(e,t,n){if(t!==t)return c(e,n);n-=1;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function n(e){return typeof e=="function"||!1}function r(e){return typeof e=="string"?e:null==e?"":e+""}function i(e){return e.charCodeAt(0)}function s(e,t){for(var n=-1,r=e.length;++n<r&&-1<t.indexOf(e.charAt(n)););return n}function o(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function u(t,n){return e(t.a,n.a)||t.b-n.b}function a(e){return _t[e]}function f(e){return Dt[e]}function l(e){return"\\"+Bt[e]}function c(e,t,n){var r=e.length;for(t+=n?0:-1;n?t--:++t<r;){var i=e[t];if(i!==i)return t}return-1}function h(e){return e&&typeof e=="object"||!1}function p(e){return 160>=e&&9<=e&&13>=e||32==e||160==e||5760==e||6158==e||8192<=e&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function d(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;)e[n]===t&&(e[n]=F,s[++i]=n);return s}function v(e){for(var t=-1,n=e.length;++t<n&&p(e.charCodeAt(t)););return t}function m(e){for(var t=e.length;t--&&p(e.charCodeAt(t)););return t}function g(e){return Pt[e]}function y(p){function _t(e){if(h(e)&&!(js(e)||e instanceof Ht)){if(e instanceof Pt)return e;if(Ri.call(e,"__chain__")&&Ri.call(e,"__wrapped__"))return br(e)}return new Pt(e)}function Dt(){}function Pt(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Ht(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=gs,this.__views__=null}function Bt(){this.__data__={}}function jt(e){var t=e?e.length:0;for(this.data={hash:us(null),set:new es};t--;)this.push(e[t])}function Ft(e,t){var n=e.data;return(typeof t=="string"||ni(t)?n.set.has(t):n.hash[t])?0:-1}function It(e,t){var n=-1,r=e.length;for(t||(t=Ni(r));++n<r;)t[n]=e[n];return t}function Ut(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function Xt(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Vt(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[++i]=o)}return s}function $t(e,t){for(var n=-1,r=e.length,i=Ni(r);++n<r;)i[n]=t(e[n],n,e);return i}function Jt(e){for(var t=-1,n=e.length,r=ms;++t<n;){var i=e[t];i>r&&(r=i)}return r}function Kt(e,t,n,r){var i=-1,s=e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Qt(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Gt(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Yt(e,t){return typeof e=="undefined"?t:e}function Zt(e,t,n,r){return typeof e!="undefined"&&Ri.call(r,n)?e:t}function en(e,t,n){var r=Us(t);if(!n)return nn(t,e,r);for(var i=-1,s=r.length;++i<s;){var o=r[i],u=e[o],a=n(u,t[o],o,e,t);(a===a?a===u:u!==u)&&(typeof u!="undefined"||o in e)||(e[o]=a)}return e}function tn(e,t){for(var n=-1,r=e.length,i=cr(r),s=t.length,o=Ni(s);++n<s;){var u=t[n];i?(u=parseFloat(u),o[n]=fr(u,r)?e[u]:b):o[n]=e[u]}return o}function nn(e,t,n){n||(n=t,t={});for(var r=-1,i=n.length;++r<i;){var s=n[r];t[s]=e[s]}return t}function rn(e,t,n){var r=typeof e;if("function"==r){if(r=typeof t!="undefined"){var r=_t.support,i=r.funcNames?!e.name:!r.funcDecomp;if(!i){var s=Ii.call(e);r.funcNames||(i=!gt.test(s)),i||(i=Tt.test(s)||ri(e),Cs(e,i))}r=i}e=r?In(e,t,n):e}else e=null==e?Ei:"object"==r?Tn(e):typeof t=="undefined"?kn(e+""):Nn(e+"",t);return e}function sn(e,t,n,r,i,s,o){var u;if(n&&(u=i?n(e,r,i):n(e)),typeof u!="undefined")return u;if(!ni(e))return e;if(r=js(e)){if(u=or(e),!t)return It(e,u)}else{var a=zi.call(e),f=a==W;if(a!=V&&a!=I&&(!f||i))return Ot[a]?ar(e,a,t):i?e:{};if(u=ur(f?{}:e),!t)return nn(e,u,Us(e))}for(s||(s=[]),o||(o=[]),i=s.length;i--;)if(s[i]==e)return o[i];return s.push(e),o.push(u),(r?Ut:gn)(e,function(r,i){u[i]=sn(r,t,n,i,e,s,o)}),u}function on(e,t,n,r){if(typeof e!="function")throw new Pi(j);return ts(function(){e.apply(b,On(n,r))},t)}function un(e,n){var r=e?e.length:0,i=[];if(!r)return i;var s=-1,o=sr(),u=o==t,a=u&&200<=n.length?ks(n):null,f=n.length;a&&(o=Ft,u=!1,n=a);e:for(;++s<r;)if(a=e[s],u&&a===a){for(var l=f;l--;)if(n[l]===a)continue e;i.push(a)}else 0>o(n,a,0)&&i.push(a);return i}function an(e,t){var n=e?e.length:0;if(!cr(n))return gn(e,t);for(var r=-1,i=yr(e);++r<n&&!1!==t(i[r],r,i););return e}function fn(e,t){var n=e?e.length:0;if(!cr(n))return yn(e,t);for(var r=yr(e);n--&&!1!==t(r[n],n,r););return e}function ln(e,t){var n=!0;return an(e,function(e,r,i){return n=!!t(e,r,i)}),n}function cn(e,t){var n=[];return an(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function hn(e,t,n,r){var i;return n(e,function(e,n,s){return t(e,n,s)?(i=r?n:e,!1):void 0}),i}function pn(e,t,n,r){r-=1;for(var i=e.length,s=-1,o=[];++r<i;){var u=e[r];if(h(u)&&cr(u.length)&&(js(u)||Zr(u))){t&&(u=pn(u,t,n,0));var a=-1,f=u.length;for(o.length+=f;++a<f;)o[++s]=u[a]}else n||(o[++s]=u)}return o}function dn(e,t,n){var r=-1,i=yr(e);n=n(e);for(var s=n.length;++r<s;){var o=n[r];if(!1===t(i[o],o,i))break}return e}function vn(e,t,n){var r=yr(e);n=n(e);for(var i=n.length;i--;){var s=n[i];if(!1===t(r[s],s,r))break}return e}function mn(e,t){dn(e,t,li)}function gn(e,t){return dn(e,t,Us)}function yn(e,t){return vn(e,t,Us)}function bn(e,t){for(var n=-1,r=t.length,i=-1,s=[];++n<r;){var o=t[n];Is(e[o])&&(s[++i]=o)}return s}function wn(e,t,n){var r=-1,i=typeof t=="function",s=e?e.length:0,o=cr(s)?Ni(s):[];return an(e,function(e){var s=i?t:null!=e&&e[t];o[++r]=s?s.apply(e,n):b}),o}function En(e,t,n,r,i,s){if(e===t)return 0!==e||1/e==1/t;var o=typeof e,u=typeof t;if("function"!=o&&"object"!=o&&"function"!=u&&"object"!=u||null==e||null==t)e=e!==e&&t!==t;else e:{var o=En,u=js(e),a=js(t),f=q,l=q;u||(f=zi.call(e),f==I?f=V:f!=V&&(u=ui(e))),a||(l=zi.call(t),l==I?l=V:l!=V&&ui(t));var c=f==V,a=l==V,l=f==l;if(!l||u||c)if(f=c&&Ri.call(e,"__wrapped__"),a=a&&Ri.call(t,"__wrapped__"),f||a)e=o(f?e.value():e,a?t.value():t,n,r,i,s);else if(l){for(i||(i=[]),s||(s=[]),f=i.length;f--;)if(i[f]==e){e=s[f]==t;break e}i.push(e),s.push(t),e=(u?er:nr)(e,t,o,n,r,i,s),i.pop(),s.pop()}else e=!1;else e=tr(e,t,f)}return e}function Sn(e,t,n,r,i){var s=t.length;if(null==e)return!s;for(var o=-1,u=!i;++o<s;)if(u&&r[o]?n[o]!==e[t[o]]:!Ri.call(e,t[o]))return!1;for(o=-1;++o<s;){var a=t[o];if(u&&r[o])a=Ri.call(e,a);else{var f=e[a],l=n[o],a=i?i(f,l,a):b;typeof a=="undefined"&&(a=En(l,f,i,!0))}if(!a)return!1}return!0}function xn(e,t){var n=[];return an(e,function(e,r,i){n.push(t(e,r,i))}),n}function Tn(e){var t=Us(e),n=t.length;if(1==n){var r=t[0],i=e[r];if(hr(i))return function(e){return null!=e&&e[r]===i&&Ri.call(e,r)}}for(var s=Ni(n),o=Ni(n);n--;)i=e[t[n]],s[n]=i,o[n]=hr(i);return function(e){return Sn(e,t,s,o)}}function Nn(e,t){return hr(t)?function(n){return null!=n&&n[e]===t}:function(n){return null!=n&&En(t,n[e],null,!0)}}function Cn(e,t,n,r,i){if(!ni(e))return e;var s=cr(t.length)&&(js(t)||ui(t));return(s?Ut:gn)(t,function(t,o,u){if(h(t)){r||(r=[]),i||(i=[]);e:{t=r;for(var a=i,f=t.length,l=u[o];f--;)if(t[f]==l){e[o]=a[f],o=void 0;break e}f=e[o],u=n?n(f,l,o,e,u):b;var c=typeof u=="undefined";c&&(u=l,cr(l.length)&&(js(l)||ui(l))?u=js(f)?f:f?It(f):[]:qs(l)||Zr(l)?u=Zr(f)?ai(f):qs(f)?f:{}:c=!1),t.push(l),a.push(u),c?e[o]=Cn(u,l,n,t,a):(u===u?u!==f:f===f)&&(e[o]=u),o=void 0}return o}a=e[o],u=n?n(a,t,o,e,u):b,(l=typeof u=="undefined")&&(u=t),!s&&typeof u=="undefined"||!l&&(u===u?u===a:a!==a)||(e[o]=u)}),e}function kn(e){return function(t){return null==t?b:t[e]}}function Ln(e,t){return e+Qi(vs()*(t-e+1))}function An(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function On(e,t,n){var r=-1,i=e.length;for(t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=typeof n=="undefined"||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0,n=Ni(i);++r<i;)n[r]=e[r+t];return n}function Mn(e,t){var n;return an(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function _n(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function Dn(t,n,r){var i=-1,s=t.length,o=cr(s)?Ni(s):[];return an(t,function(e){for(var t=n.length,r=Ni(t);t--;)r[t]=null==e?b:e[n[t]];o[++i]={a:r,b:i,c:e}}),_n(o,function(t,n){var i;e:{i=-1;for(var s=t.a,o=n.a,u=s.length,a=r.length;++i<u;){var f=e(s[i],o[i]);if(f){i=i<a?f*(r[i]?1:-1):f;break e}}i=t.b-n.b}return i})}function Pn(e,n){var r=-1,i=sr(),s=e.length,o=i==t,u=o&&200<=s,a=u?ks():null,f=[];a?(i=Ft,o=!1):(u=!1,a=n?[]:f);e:for(;++r<s;){var l=e[r],c=n?n(l,r,e):l;if(o&&l===l){for(var h=a.length;h--;)if(a[h]===c)continue e;n&&a.push(c),f.push(l)}else 0>i(a,c,0)&&((n||u)&&a.push(c),f.push(l))}return f}function Hn(e,t){for(var n=-1,r=t.length,i=Ni(r);++n<r;)i[n]=e[t[n]];return i}function Bn(e,t){var n=e;n instanceof Ht&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var n=[n],s=t[r];Yi.apply(n,s.args),n=s.func.apply(s.thisArg,n)}return n}function jn(e,t,n){var r=0,i=e?e.length:r;if(typeof t=="number"&&t===t&&i<=ws){for(;r<i;){var s=r+i>>>1,o=e[s];(n?o<=t:o<t)?r=s+1:i=s}return i}return Fn(e,t,Ei,n)}function Fn(e,t,n,r){t=n(t);for(var i=0,s=e?e.length:0,o=t!==t,u=typeof t=="undefined";i<s;){var a=Qi((i+s)/2),f=n(e[a]),l=f===f;(o?l||r:u?l&&(r||typeof f!="undefined"):r?f<=t:f<t)?i=a+1:s=a}return cs(s,bs)}function In(e,t,n){if(typeof e!="function")return Ei;if(typeof t=="undefined")return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)};case 5:return function(n,r,i,s,o){return e.call(t,n,r,i,s,o)}}return function(){return e.apply(t,arguments)}}function qn(e){return $i.call(e,0)}function Rn(e,t,n){for(var r=n.length,i=-1,s=ls(e.length-r,0),o=-1,u=t.length,a=Ni(s+u);++o<u;)a[o]=t[o];for(;++i<r;)a[n[i]]=e[i];for(;s--;)a[o++]=e[i++];return a}function Un(e,t,n){for(var r=-1,i=n.length,s=-1,o=ls(e.length-i,0),u=-1,a=t.length,f=Ni(o+a);++s<o;)f[s]=e[s];for(o=s;++u<a;)f[o+u]=t[u];for(;++r<i;)f[o+n[r]]=e[s++];return f}function zn(e,t){return function(n,r,i){var s=t?t():{};if(r=ir(r,i,3),js(n)){i=-1;for(var o=n.length;++i<o;){var u=n[i];e(s,u,r(u,i,n),n)}}else an(n,function(t,n,i){e(s,t,r(t,n,i),i)});return s}}function Wn(e){return function(){var t=arguments,n=t.length,r=t[0];if(2>n||null==r)return r;var i=t[n-2],s=t[n-1],o=t[3];for(3<n&&typeof i=="function"?(i=In(i,s,5),n-=2):(i=2<n&&typeof s=="function"?s:null,n-=i?1:0),o&&lr(t[1],t[2],o)&&(i=3==n?null:i,n=2),s=0;++s<n;)(o=t[s])&&e(r,o,i);return r}}function Xn(e,t){function n(){return(this&&this!==qt&&this instanceof n?r:e).apply(t,arguments)}var r=Jn(e);return n}function Vn(e){return function(){var t=arguments.length,n=t,r=e?t-1:0;if(!t)return function(e){return e};for(var i=Ni(t);n--;)if(i[n]=arguments[n],"function"!=typeof i[n])throw new Pi(j);return function(){for(var n=r,s=i[n].apply(this,arguments);e?n--:++n<t;)s=i[n].call(this,s);return s}}}function $n(e){return function(t){var n=-1;t=gi(hi(t));for(var r=t.length,i="";++n<r;)i=e(i,t[n],n);return i}}function Jn(e){return function(){var t=Ns(e.prototype),n=e.apply(t,arguments);return ni(n)?n:t}}function Kn(e,t){return function(n,r,s){s&&lr(n,r,s)&&(r=null);var o=ir(),u=null==r;if(o===rn&&u||(u=!1,r=o(r,s,3)),u){if(r=js(n),r||!oi(n))return e(r?n:gr(n));r=i}return rr(n,r,t)}}function Qn(e,t,n,r,i,s,o,u,a,f){function l(){for(var x=arguments.length,T=x,N=Ni(x);T--;)N[T]=arguments[T];if(r&&(N=Rn(N,r,i)),s&&(N=Un(N,s,o)),v||g){var T=l.placeholder,L=d(N,T),x=x-L.length;if(x<f){var A=u?It(u):null,x=ls(f-x,0),O=v?L:null,L=v?null:L,M=v?N:null,N=v?null:N;return t|=v?C:k,t&=~(v?k:C),m||(t&=~(E|S)),N=Qn(e,t,n,M,O,N,L,A,a,x),N.placeholder=T,N}}if(T=h?n:this,p&&(e=T[w]),u)for(A=N.length,x=cs(u.length,A),O=It(N);x--;)L=u[x],N[x]=fr(L,A)?O[L]:b;return c&&a<N.length&&(N.length=a),(this&&this!==qt&&this instanceof l?y||Jn(e):e).apply(T,N)}var c=t&A,h=t&E,p=t&S,v=t&T,m=t&x,g=t&N,y=!p&&Jn(e),w=e;return l}function Gn(e,t,n){return e=e.length,t=+t,e<t&&as(t)?(t-=e,n=null==n?" ":n+"",vi(n,Ji(t/n.length)).slice(0,t)):""}function Yn(e,t,n,r){function i(){for(var t=-1,u=arguments.length,a=-1,f=r.length,l=Ni(u+f);++a<f;)l[a]=r[a];for(;u--;)l[a++]=arguments[++t];return(this&&this!==qt&&this instanceof i?o:e).apply(s?n:this,l)}var s=t&E,o=Jn(e);return i}function Zn(e,t,n,r,i,s,o,u){var a=t&S;if(!a&&typeof e!="function")throw new Pi(j);var f=r?r.length:0;if(f||(t&=~(C|k),r=i=null),f-=i?i.length:0,t&k){var l=r,c=i;r=i=null}var h=!a&&Ls(e);if(n=[e,t,n,r,i,l,c,s,o,u],h&&!0!==h){r=n[1],t=h[1],u=r|t,s=A|L,i=E|S,o=s|i|x|N;var l=r&A&&!(t&A),c=r&L&&!(t&L),p=(c?n:h)[7],v=(l?n:h)[8];s=u>=s&&u<=o&&(r<L||(c||l)&&p.length<=v),(!(r>=L&&t>i||r>i&&t>=L)||s)&&(t&E&&(n[2]=h[2],u|=r&E?0:x),(r=h[3])&&(i=n[3],n[3]=i?Rn(i,r,h[4]):It(r),n[4]=i?d(n[3],F):It(h[4])),(r=h[5])&&(i=n[5],n[5]=i?Un(i,r,h[6]):It(r),n[6]=i?d(n[5],F):It(h[6])),(r=h[7])&&(n[7]=It(r)),t&A&&(n[8]=null==n[8]?h[8]:cs(n[8],h[8])),null==n[9]&&(n[9]=h[9]),n[0]=h[0],n[1]=u),t=n[1],u=n[9]}return n[9]=null==u?a?0:e.length:ls(u-f,0)||0,(h?Cs:As)(t==E?Xn(n[0],n[2]):t!=C&&t!=(E|C)||n[4].length?Qn.apply(b,n):Yn.apply(b,n),n)}function er(e,t,n,r,i,s,o){var u=-1,a=e.length,f=t.length,l=!0;if(a!=f&&(!i||f<=a))return!1;for(;l&&++u<a;){var c=e[u],h=t[u],l=b;if(r&&(l=i?r(h,c,u):r(c,h,u)),typeof l=="undefined")if(i)for(var p=f;p--&&(h=t[p],!(l=c&&c===h||n(c,h,r,i,s,o))););else l=c&&c===h||n(c,h,r,i,s,o)}return!!l}function tr(e,t,n){switch(n){case R:case U:return+e==+t;case z:return e.name==t.name&&e.message==t.message;case X:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case $:case J:return e==t+""}return!1}function nr(e,t,n,r,i,s,o){var u=Us(e),a=u.length,f=Us(t).length;if(a!=f&&!i)return!1;for(var l,f=-1;++f<a;){var c=u[f],h=Ri.call(t,c);if(h){var p=e[c],d=t[c],h=b;r&&(h=i?r(d,p,c):r(p,d,c)),typeof h=="undefined"&&(h=p&&p===d||n(p,d,r,i,s,o))}if(!h)return!1;l||(l="constructor"==c)}return l||(n=e.constructor,r=t.constructor,!(n!=r&&"constructor"in e&&"constructor"in t)||typeof n=="function"&&n instanceof n&&typeof r=="function"&&r instanceof r)?!0:!1}function rr(e,t,n){var r=n?gs:ms,i=r,s=i;return an(e,function(e,o,u){o=t(e,o,u),((n?o<i:o>i)||o===r&&o===s)&&(i=o,s=e)}),s}function ir(e,t,n){var r=_t.callback||bi,r=r===bi?rn:r;return n?r(e,t,n):r}function sr(e,n,r){var i=_t.indexOf||Tr,i=i===Tr?t:i;return e?i(e,n,r):i}function or(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Ri.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function ur(e){return e=e.constructor,typeof e=="function"&&e instanceof e||(e=Mi),new e}function ar(e,t,n){var r=e.constructor;switch(t){case K:return qn(e);case R:case U:return new r(+e);case Q:case G:case Y:case Z:case et:case tt:case nt:case rt:case it:return t=e.buffer,new r(n?qn(t):t,e.byteOffset,e.length);case X:case J:return new r(e);case $:var i=new r(e.source,mt.exec(e));i.lastIndex=e.lastIndex}return i}function fr(e,t){return e=+e,t=null==t?Ss:t,-1<e&&0==e%1&&e<t}function lr(e,t,n){if(!ni(n))return!1;var r=typeof t;return"number"==r?(r=n.length,r=cr(r)&&fr(t,r)):r="string"==r&&t in n,r?(t=n[t],e===e?e===t:t!==t):!1}function cr(e){return typeof e=="number"&&-1<e&&0==e%1&&e<=Ss}function hr(e){return e===e&&(0===e?0<1/e:!ni(e))}function pr(e,t){e=yr(e);for(var n=-1,r=t.length,i={};++n<r;){var s=t[n];s in e&&(i[s]=e[s])}return i}function dr(e,t){var n={};return mn(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function vr(e){var t;if(!h(e)||zi.call(e)!=V||!(Ri.call(e,"constructor")||(t=e.constructor,typeof t!="function"||t instanceof t)))return!1;var n;return mn(e,function(e,t){n=t}),typeof n=="undefined"||Ri.call(e,n)}function mr(e){for(var t=li(e),n=t.length,r=n&&e.length,i=_t.support,i=r&&cr(r)&&(js(e)||i.nonEnumArgs&&Zr(e)),s=-1,o=[];++s<n;){var u=t[s];(i&&fr(u,r)||Ri.call(e,u))&&o.push(u)}return o}function gr(e){return null==e?[]:cr(e.length)?ni(e)?e:Mi(e):ci(e)}function yr(e){return ni(e)?e:Mi(e)}function br(e){return e instanceof Ht?e.clone():new Pt(e.__wrapped__,e.__chain__,It(e.__actions__))}function wr(e,t,n){return e&&e.length?((n?lr(e,t,n):null==t)&&(t=1),On(e,0>t?0:t)):[]}function Er(e,t,n){var r=e?e.length:0;return r?((n?lr(e,t,n):null==t)&&(t=1),t=r-(+t||0),On(e,0,0>t?0:t)):[]}function Sr(e,t,n){var r=-1,i=e?e.length:0;for(t=ir(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1}function xr(e){return e?e[0]:b}function Tr(e,n,r){var i=e?e.length:0;if(!i)return-1;if(typeof r=="number")r=0>r?ls(i+r,0):r;else if(r)return r=jn(e,n),e=e[r],(n===n?n===e:e!==e)?r:-1;return t(e,n,r||0)}function Nr(e){var t=e?e.length:0;return t?e[t-1]:b}function Cr(e){return wr(e,1)}function kr(e,n,r,i){if(!e||!e.length)return[];null!=n&&typeof n!="boolean"&&(i=r,r=lr(e,n,i)?null:n,n=!1);var s=ir();if((s!==rn||null!=r)&&(r=s(r,i,3)),n&&sr()==t){n=r;var o;r=-1,i=e.length;for(var s=-1,u=[];++r<i;){var a=e[r],f=n?n(a,r,e):a;r&&o===f||(o=f,u[++s]=a)}e=u}else e=Pn(e,r);return e}function Lr(e){for(var t=-1,n=(e&&e.length&&Jt($t(e,qi)))>>>0,r=Ni(n);++t<n;)r[t]=$t(e,kn(t));return r}function Ar(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||js(e[0])||(t=[]);++n<r;){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function Or(e){return e=_t(e),e.__chain__=!0,e}function Mr(e,t,n){return t.call(n,e)}function _r(e,t,n){var r=js(e)?Xt:ln;return(typeof t!="function"||typeof n!="undefined")&&(t=ir(t,n,3)),r(e,t)}function Dr(e,t,n){var r=js(e)?Vt:cn;return t=ir(t,n,3),r(e,t)}function Pr(e,t,n){return js(e)?(t=Sr(e,t,n),-1<t?e[t]:b):(t=ir(t,n,3),hn(e,t,an))}function Hr(e,t,n){return typeof t=="function"&&typeof n=="undefined"&&js(e)?Ut(e,t):an(e,In(t,n,3))}function Br(e,t,n){if(typeof t=="function"&&typeof n=="undefined"&&js(e))for(n=e.length;n--&&!1!==t(e[n],n,e););else e=fn(e,In(t,n,3));return e}function jr(e,t,n){var r=e?e.length:0;return cr(r)||(e=ci(e),r=e.length),r?(n=typeof n=="number"?0>n?ls(r+n,0):n||0:0,typeof e=="string"||!js(e)&&oi(e)?n<r&&-1<e.indexOf(t,n):-1<sr(e,t,n)):!1}function Fr(e,t,n){var r=js(e)?$t:xn;return t=ir(t,n,3),r(e,t)}function Ir(e,t,n,r){return(js(e)?Kt:An)(e,ir(t,r,4),n,3>arguments.length,an)}function qr(e,t,n,r){return(js(e)?Qt:An)(e,ir(t,r,4),n,3>arguments.length,fn)}function Rr(e,t,n){return(n?lr(e,t,n):null==t)?(e=gr(e),t=e.length,0<t?e[Ln(0,t-1)]:b):(e=Ur(e),e.length=cs(0>t?0:+t||0,e.length),e)}function Ur(e){e=gr(e);for(var t=-1,n=e.length,r=Ni(n);++t<n;){var i=Ln(0,t);t!=i&&(r[t]=r[i]),r[i]=e[t]}return r}function zr(e,t,n){var r=js(e)?Gt:Mn;return(typeof t!="function"||typeof n!="undefined")&&(t=ir(t,n,3)),r(e,t)}function Wr(e,t){var n;if(typeof t!="function"){if(typeof e!="function")throw new Pi(j);var r=e;e=t,t=r}return function(){return 0<--e?n=t.apply(this,arguments):t=null,n}}function Xr(e,t){var n=E;if(2<arguments.length)var r=On(arguments,2),i=d(r,Xr.placeholder),n=n|C;return Zn(e,n,t,r,i)}function Vr(e,t){var n=E|S;if(2<arguments.length)var r=On(arguments,2),i=d(r,Vr.placeholder),n=n|C;return Zn(t,n,e,r,i)}function $r(e,t,n){return n&&lr(e,t,n)&&(t=null),e=Zn(e,T,null,null,null,null,null,t),e.placeholder=$r.placeholder,e}function Jr(e,t,n){return n&&lr(e,t,n)&&(t=null),e=Zn(e,N,null,null,null,null,null,t),e.placeholder=Jr.placeholder,e}function Kr(e,t,n){function r(){var n=t-(Ps()-f);0>=n||n>t?(u&&Ki(u),n=h,u=c=h=b,n&&(p=Ps(),a=e.apply(l,o),c||u||(o=l=null))):c=ts(r,n)}function i(){c&&Ki(c),u=c=h=b,(v||d!==t)&&(p=Ps(),a=e.apply(l,o),c||u||(o=l=null))}function s(){if(o=arguments,f=Ps(),l=this,h=v&&(c||!m),!1===d)var n=m&&!c;else{u||m||(p=f);var s=d-(f-p),g=0>=s||s>d;g?(u&&(u=Ki(u)),p=f,a=e.apply(l,o)):u||(u=ts(i,s))}return g&&c?c=Ki(c):c||t===d||(c=ts(r,t)),n&&(g=!0,a=e.apply(l,o)),!g||c||u||(o=l=null),a}var o,u,a,f,l,c,h,p=0,d=!1,v=!0;if(typeof e!="function")throw new Pi(j);if(t=0>t?0:+t||0,!0===n)var m=!0,v=!1;else ni(n)&&(m=n.leading,d="maxWait"in n&&ls(+n.maxWait||0,t),v="trailing"in n?n.trailing:v);return s.cancel=function(){c&&Ki(c),u&&Ki(u),u=c=h=b},s}function Qr(e,t){function n(){var r=arguments,i=n.cache,s=t?t.apply(this,r):r[0];return i.has(s)?i.get(s):(r=e.apply(this,r),i.set(s,r),r)}if(typeof e!="function"||t&&typeof t!="function")throw new Pi(j);return n.cache=new Qr.Cache,n}function Gr(e){var t=On(arguments,1),n=d(t,Gr.placeholder);return Zn(e,C,null,t,n)}function Yr(e){var t=On(arguments,1),n=d(t,Yr.placeholder);return Zn(e,k,null,t,n)}function Zr(e){return cr(h(e)?e.length:b)&&zi.call(e)==I||!1}function ei(e){return e&&1===e.nodeType&&h(e)&&-1<zi.call(e).indexOf("Element")||!1}function ti(e){return h(e)&&typeof e.message=="string"&&zi.call(e)==z||!1}function ni(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}function ri(e){return null==e?!1:zi.call(e)==W?Xi.test(Ii.call(e)):h(e)&&bt.test(e)||!1}function ii(e){return typeof e=="number"||h(e)&&zi.call(e)==X||!1}function si(e){return h(e)&&zi.call(e)==$||!1}function oi(e){return typeof e=="string"||h(e)&&zi.call(e)==J||!1}function ui(e){return h(e)&&cr(e.length)&&At[zi.call(e)]||!1}function ai(e){return nn(e,li(e))}function fi(e){return bn(e,li(e))}function li(e){if(null==e)return[];ni(e)||(e=Mi(e));for(var t=e.length,t=t&&cr(t)&&(js(e)||Ts.nonEnumArgs&&Zr(e))&&t||0,n=e.constructor,r=-1,n=typeof n=="function"&&n.prototype===e,i=Ni(t),s=0<t;++r<t;)i[r]=r+"";for(var o in e)s&&fr(o,t)||"constructor"==o&&(n||!Ri.call(e,o))||i.push(o);return i}function ci(e){return Hn(e,Us(e))}function hi(e){return(e=r(e))&&e.replace(wt,a)}function pi(e){return(e=r(e))&&xt.test(e)?e.replace(St,"\\$&"):e}function di(e,t,n){return n&&lr(e,t,n)&&(t=0),ds(e,t)}function vi(e,t){var n="";if(e=r(e),t=+t,1>t||!e||!as(t))return n;do t%2&&(n+=e),t=Qi(t/2),e+=e;while(t);return n}function mi(e,t,n){var i=e;return(e=r(e))?(n?lr(i,t,n):null==t)?e.slice(v(e),m(e)+1):(t+="",e.slice(s(e,t),o(e,t)+1)):e}function gi(e,t,n){return n&&lr(e,t,n)&&(t=null),e=r(e),e.match(t||Ct)||[]}function yi(){for(var e=arguments[0],t=arguments.length,n=Ni(t?t-1:0);0<--t;)n[t-1]=arguments[t];try{return e.apply(b,n)}catch(r){return ti(r)?r:new ki(r)}}function bi(e,t,n){return n&&lr(e,t,n)&&(t=null),h(e)?Si(e):rn(e,t)}function wi(e){return function(){return e}}function Ei(e){return e}function Si(e){return Tn(sn(e,!0))}function xi(e,t,n){if(null==n){var r=ni(t),i=r&&Us(t);((i=i&&i.length&&bn(t,i))?i.length:r)||(i=!1,n=t,t=e,e=this)}i||(i=bn(t,Us(t)));var s=!0,r=-1,o=Is(e),u=i.length;!1===n?s=!1:ni(n)&&"chain"in n&&(s=n.chain);for(;++r<u;){n=i[r];var a=t[n];e[n]=a,o&&(e.prototype[n]=function(t){return function(){var n=this.__chain__;if(s||n){var r=e(this.__wrapped__);return(r.__actions__=It(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return n=[this.value()],Yi.apply(n,arguments),t.apply(e,n)}}(a))}return e}function Ti(){}p=p?Rt.defaults(qt.Object(),p,Rt.pick(qt,Lt)):qt;var Ni=p.Array,Ci=p.Date,ki=p.Error,Li=p.Function,Ai=p.Math,Oi=p.Number,Mi=p.Object,_i=p.RegExp,Di=p.String,Pi=p.TypeError,Hi=Ni.prototype,Bi=Mi.prototype,ji=Di.prototype,Fi=(Fi=p.window)&&Fi.document,Ii=Li.prototype.toString,qi=kn("length"),Ri=Bi.hasOwnProperty,Ui=0,zi=Bi.toString,Wi=p._,Xi=_i("^"+pi(zi).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vi=ri(Vi=p.ArrayBuffer)&&Vi,$i=ri($i=Vi&&(new Vi(0)).slice)&&$i,Ji=Ai.ceil,Ki=p.clearTimeout,Qi=Ai.floor,Gi=ri(Gi=Mi.getPrototypeOf)&&Gi,Yi=Hi.push,Zi=Bi.propertyIsEnumerable,es=ri(es=p.Set)&&es,ts=p.setTimeout,ns=Hi.splice,rs=ri(rs=p.Uint8Array)&&rs,is=ri(is=p.WeakMap)&&is,ss=function(){try{var e=ri(e=p.Float64Array)&&e,t=new e(new Vi(10),0,1)&&e}catch(n){}return t}(),os=ri(os=Ni.isArray)&&os,us=ri(us=Mi.create)&&us,as=p.isFinite,fs=ri(fs=Mi.keys)&&fs,ls=Ai.max,cs=Ai.min,hs=ri(hs=Ci.now)&&hs,ps=ri(ps=Oi.isFinite)&&ps,ds=p.parseInt,vs=Ai.random,ms=Oi.NEGATIVE_INFINITY,gs=Oi.POSITIVE_INFINITY,ys=Ai.pow(2,32)-1,bs=ys-1,ws=ys>>>1,Es=ss?ss.BYTES_PER_ELEMENT:0,Ss=Ai.pow(2,53)-1,xs=is&&new is,Ts=_t.support={};!function(e){Ts.funcDecomp=!ri(p.WinRTError)&&Tt.test(y),Ts.funcNames=typeof Li.name=="string";try{Ts.dom=11===Fi.createDocumentFragment().nodeType}catch(t){Ts.dom=!1}try{Ts.nonEnumArgs=!Zi.call(arguments,1)}catch(n){Ts.nonEnumArgs=!0}}(0,0),_t.templateSettings={escape:ht,evaluate:pt,interpolate:dt,variable:"",imports:{_:_t}};var Ns=function(){function e(){}return function(t){if(ni(t)){e.prototype=t;var n=new e;e.prototype=null}return n||p.Object()}}(),Cs=xs?function(e,t){return xs.set(e,t),e}:Ei;$i||(qn=Vi&&rs?function(e){var t=e.byteLength,n=ss?Qi(t/Es):0,r=n*Es,i=new Vi(t);if(n){var s=new ss(i,0,n);s.set(new ss(e,0,n))}return t!=r&&(s=new rs(i,r),s.set(new rs(e,r))),i}:wi(null));var ks=us&&es?function(e){return new jt(e)}:wi(null),Ls=xs?function(e){return xs.get(e)}:Ti,As=function(){var e=0,t=0;return function(n,r){var i=Ps(),s=D-(i-t);if(t=i,0<s){if(++e>=_)return n}else e=0;return Cs(n,r)}}(),Os=zn(function(e,t,n){Ri.call(e,n)?++e[n]:e[n]=1}),Ms=zn(function(e,t,n){Ri.call(e,n)?e[n].push(t):e[n]=[t]}),_s=zn(function(e,t,n){e[n]=t}),Ds=zn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ps=hs||function(){return(new Ci).getTime()},Hs=Vn(),Bs=Vn(!0),js=os||function(e){return h(e)&&cr(e.length)&&zi.call(e)==q||!1};Ts.dom||(ei=function(e){return e&&1===e.nodeType&&h(e)&&!qs(e)||!1});var Fs=ps||function(e){return typeof e=="number"&&as(e)},Is=n(/x/)||rs&&!n(rs)?function(e){return zi.call(e)==W}:n,qs=Gi?function(e){if(!e||zi.call(e)!=V)return!1;var t=e.valueOf,n=ri(t)&&(n=Gi(t))&&Gi(n);return n?e==n||Gi(e)==n:vr(e)}:vr,Rs=Wn(en),Us=fs?function(e){if(e)var t=e.constructor,n=e.length;return typeof t=="function"&&t.prototype===e||typeof e!="function"&&n&&cr(n)?mr(e):ni(e)?fs(e):[]}:mr,zs=Wn(Cn),Ws=$n(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Xs=$n(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});8!=ds(kt+"08")&&(di=function(e,t,n){return(n?lr(e,t,n):null==t)?t=0:t&&(t=+t),e=mi(e),ds(e,t||(yt.test(e)?16:10))});var Vs=$n(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),$s=$n(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Js=Kn(Jt),Ks=Kn(function(e){for(var t=-1,n=e.length,r=gs;++t<n;){var i=e[t];i<r&&(r=i)}return r},!0);return _t.prototype=Dt.prototype,Pt.prototype=Ns(Dt.prototype),Pt.prototype.constructor=Pt,Ht.prototype=Ns(Dt.prototype),Ht.prototype.constructor=Ht,Bt.prototype["delete"]=function(e){return this.has(e)&&delete this.__data__[e]},Bt.prototype.get=function(e){return"__proto__"==e?b:this.__data__[e]},Bt.prototype.has=function(e){return"__proto__"!=e&&Ri.call(this.__data__,e)},Bt.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},jt.prototype.push=function(e){var t=this.data;typeof e=="string"||ni(e)?t.set.add(e):t.hash[e]=!0},Qr.Cache=Bt,_t.after=function(e,t){if(typeof t!="function"){if(typeof e!="function")throw new Pi(j);var n=e;e=t,t=n}return e=as(e=+e)?e:0,function(){return 1>--e?t.apply(this,arguments):void 0}},_t.ary=function(e,t,n){return n&&lr(e,t,n)&&(t=null),t=e&&null==t?e.length:ls(+t||0,0),Zn(e,A,null,null,null,null,t)},_t.assign=Rs,_t.at=function(e){return cr(e?e.length:0)&&(e=gr(e)),tn(e,pn(arguments,!1,!1,1))},_t.before=Wr,_t.bind=Xr,_t.bindAll=function(e){for(var t=e,n=1<arguments.length?pn(arguments,!1,!1,1):fi(e),r=-1,i=n.length;++r<i;){var s=n[r];t[s]=Zn(t[s],E,t)}return t},_t.bindKey=Vr,_t.callback=bi,_t.chain=Or,_t.chunk=function(e,t,n){t=(n?lr(e,t,n):null==t)?1:ls(+t||1,1),n=0;for(var r=e?e.length:0,i=-1,s=Ni(Ji(r/t));n<r;)s[++i]=On(e,n,n+=t);return s},_t.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var s=e[t];s&&(i[++r]=s)}return i},_t.constant=wi,_t.countBy=Os,_t.create=function(e,t,n){var r=Ns(e);return n&&lr(e,t,n)&&(t=null),t?nn(t,r,Us(t)):r},_t.curry=$r,_t.curryRight=Jr,_t.debounce=Kr,_t.defaults=function(e){if(null==e)return e;var t=It(arguments);return t.push(Yt),Rs.apply(b,t)},_t.defer=function(e){return on(e,1,arguments,1)},_t.delay=function(e,t){return on(e,t,arguments,2)},_t.difference=function(){for(var e=arguments,t=-1,n=e.length;++t<n;){var r=e[t];if(js(r)||Zr(r))break}return un(r,pn(e,!1,!0,++t))},_t.drop=wr,_t.dropRight=Er,_t.dropRightWhile=function(e,t,n){var r=e?e.length:0;if(!r)return[];for(t=ir(t,n,3);r--&&t(e[r],r,e););return On(e,0,r+1)},_t.dropWhile=function(e,t,n){var r=e?e.length:0;if(!r)return[];var i=-1;for(t=ir(t,n,3);++i<r&&t(e[i],i,e););return On(e,i)},_t.fill=function(e,t,n,r){var i=e?e.length:0;if(!i)return[];for(n&&typeof n!="number"&&lr(e,t,n)&&(n=0,r=i),i=e.length,n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=typeof r=="undefined"||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)e[n++]=t;return e},_t.filter=Dr,_t.flatten=function(e,t,n){var r=e?e.length:0;return n&&lr(e,t,n)&&(t=!1),r?pn(e,t,!1,0):[]},_t.flattenDeep=function(e){return e&&e.length?pn(e,!0,!1,0):[]},_t.flow=Hs,_t.flowRight=Bs,_t.forEach=Hr,_t.forEachRight=Br,_t.forIn=function(e,t,n){return(typeof t!="function"||typeof n!="undefined")&&(t=In(t,n,3)),dn(e,t,li)},_t.forInRight=function(e,t,n){return t=In(t,n,3),vn(e,t,li)},_t.forOwn=function(e,t,n){return(typeof t!="function"||typeof n!="undefined")&&(t=In(t,n,3)),gn(e,t)},_t.forOwnRight=function(e,t,n){return t=In(t,n,3),vn(e,t,Us)},_t.functions=fi,_t.groupBy=Ms,_t.indexBy=_s,_t.initial=function(e){return Er(e,1)},_t.intersection=function(){for(var e=[],n=-1,r=arguments.length,i=[],s=sr(),o=s==t;++n<r;){var u=arguments[n];(js(u)||Zr(u))&&(e.push(u),i.push(o&&120<=u.length?ks(n&&u):null))}var r=e.length,o=e[0],a=-1,f=o?o.length:0,l=[],c=i[0];e:for(;++a<f;)if(u=o[a],0>(c?Ft(c,u):s(l,u,0))){for(n=r;--n;){var h=i[n];if(0>(h?Ft(h,u):s(e[n],u,0)))continue e}c&&c.push(u),l.push(u)}return l},_t.invert=function(e,t,n){n&&lr(e,t,n)&&(t=null),n=-1;for(var r=Us(e),i=r.length,s={};++n<i;){var o=r[n],u=e[o];t?Ri.call(s,u)?s[u].push(o):s[u]=[o]:s[u]=o}return s},_t.invoke=function(e,t){return wn(e,t,On(arguments,2))},_t.keys=Us,_t.keysIn=li,_t.map=Fr,_t.mapValues=function(e,t,n){var r={};return t=ir(t,n,3),gn(e,function(e,n,i){r[n]=t(e,n,i)}),r},_t.matches=Si,_t.matchesProperty=function(e,t){return Nn(e+"",sn(t,!0))},_t.memoize=Qr,_t.merge=zs,_t.mixin=xi,_t.negate=function(e){if(typeof e!="function")throw new Pi(j);return function(){return!e.apply(this,arguments)}},_t.omit=function(e,t,n){if(null==e)return{};if(typeof t!="function"){var r=$t(pn(arguments,!1,!1,1),Di);return pr(e,un(li(e),r))}return t=In(t,n,3),dr(e,function(e,n,r){return!t(e,n,r)})},_t.once=function(e){return Wr(e,2)},_t.pairs=function(e){for(var t=-1,n=Us(e),r=n.length,i=Ni(r);++t<r;){var s=n[t];i[t]=[s,e[s]]}return i},_t.partial=Gr,_t.partialRight=Yr,_t.partition=Ds,_t.pick=function(e,t,n){return null==e?{}:typeof t=="function"?dr(e,In(t,n,3)):pr(e,pn(arguments,!1,!1,1))},_t.pluck=function(e,t){return Fr(e,kn(t))},_t.property=function(e){return kn(e+"")},_t.propertyOf=function(e){return function(t){return null==e?b:e[t]}},_t.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=sr(),i=e.length;++n<i;)for(var s=0,o=e[n];-1<(s=r(t,o,s));)ns.call(t,s,1);return t},_t.pullAt=function(t){var n=t||[],r=pn(arguments,!1,!1,1),i=r.length,s=tn(n,r);for(r.sort(e);i--;){var o=parseFloat(r[i]);if(o!=u&&fr(o)){var u=o;ns.call(n,o,1)}}return s},_t.range=function(e,t,n){n&&lr(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;var r=-1;t=ls(Ji((t-e)/(n||1)),0);for(var i=Ni(t);++r<t;)i[r]=e,e+=n;return i},_t.rearg=function(e){var t=pn(arguments,!1,!1,1);return Zn(e,L,null,null,null,t)},_t.reject=function(e,t,n){var r=js(e)?Vt:cn;return t=ir(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},_t.remove=function(e,t,n){var r=-1,i=e?e.length:0,s=[];for(t=ir(t,n,3);++r<i;)n=e[r],t(n,r,e)&&(s.push(n),ns.call(e,r--,1),i--);return s},_t.rest=Cr,_t.shuffle=Ur,_t.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&typeof n!="number"&&lr(e,t,n)&&(t=0,n=r),On(e,t,n)):[]},_t.sortBy=function(e,t,n){if(null==e)return[];var r=-1,i=e.length,s=cr(i)?Ni(i):[];return n&&lr(e,t,n)&&(t=null),t=ir(t,n,3),an(e,function(e,n,i){s[++r]={a:t(e,n,i),b:r,c:e}}),_n(s,u)},_t.sortByAll=function(e){if(null==e)return[];var t=arguments,n=t[3];return n&&lr(t[1],t[2],n)&&(t=[e,t[1]]),Dn(e,pn(t,!1,!1,1),[])},_t.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&lr(t,n,r)&&(n=null),js(t)||(t=null==t?[]:[t]),js(n)||(n=null==n?[]:[n]),Dn(e,t,n))},_t.spread=function(e){if(typeof e!="function")throw new Pi(j);return function(t){return e.apply(this,t)}},_t.take=function(e,t,n){return e&&e.length?((n?lr(e,t,n):null==t)&&(t=1),On(e,0,0>t?0:t)):[]},_t.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?lr(e,t,n):null==t)&&(t=1),t=r-(+t||0),On(e,0>t?0:t)):[]},_t.takeRightWhile=function(e,t,n){var r=e?e.length:0;if(!r)return[];for(t=ir(t,n,3);r--&&t(e[r],r,e););return On(e,r+1)},_t.takeWhile=function(e,t,n){var r=e?e.length:0;if(!r)return[];var i=-1;for(t=ir(t,n,3);++i<r&&t(e[i],i,e););return On(e,0,i)},_t.tap=function(e,t,n){return t.call(n,e),e},_t.throttle=function(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new Pi(j);return!1===n?r=!1:ni(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Mt.leading=r,Mt.maxWait=+t,Mt.trailing=i,Kr(e,t,Mt)},_t.thru=Mr,_t.times=function(e,t,n){if(e=+e,1>e||!as(e))return[];var r=-1,i=Ni(cs(e,ys));for(t=In(t,n,1);++r<e;)r<ys?i[r]=t(r):t(r);return i},_t.toArray=function(e){var t=e?e.length:0;return cr(t)?t?It(e):[]:ci(e)},_t.toPlainObject=ai,_t.transform=function(e,t,n,r){var i=js(e)||ui(e);return t=ir(t,r,4),null==n&&(i||ni(e)?(r=e.constructor,n=i?js(e)?new r:[]:Ns(Is(r)&&r.prototype)):n={}),(i?Ut:gn)(e,function(e,r,i){return t(n,e,r,i)}),n},_t.union=function(){return Pn(pn(arguments,!1,!0,0))},_t.uniq=kr,_t.unzip=Lr,_t.values=ci,_t.valuesIn=function(e){return Hn(e,li(e))},_t.where=function(e,t){return Dr(e,Tn(t))},_t.without=function(e){return un(e,On(arguments,1))},_t.wrap=function(e,t){return t=null==t?Ei:t,Zn(t,C,null,[e],[])},_t.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(js(n)||Zr(n))var r=r?un(r,n).concat(un(n,r)):n}return r?Pn(r):[]},_t.zip=function(){for(var e=arguments.length,t=Ni(e);e--;)t[e]=arguments[e];return Lr(t)},_t.zipObject=Ar,_t.backflow=Bs,_t.collect=Fr,_t.compose=Bs,_t.each=Hr,_t.eachRight=Br,_t.extend=Rs,_t.iteratee=bi,_t.methods=fi,_t.object=Ar,_t.select=Dr,_t.tail=Cr,_t.unique=kr,xi(_t,_t),_t.add=function(e,t){return e+t},_t.attempt=yi,_t.camelCase=Ws,_t.capitalize=function(e){return(e=r(e))&&e.charAt(0).toUpperCase()+e.slice(1)},_t.clone=function(e,t,n,r){return t&&typeof t!="boolean"&&lr(e,t,n)?t=!1:typeof t=="function"&&(r=n,n=t,t=!1),n=typeof n=="function"&&In(n,r,1),sn(e,t,n)},_t.cloneDeep=function(e,t,n){return t=typeof t=="function"&&In(t,n,1),sn(e,!0,t)},_t.deburr=hi,_t.endsWith=function(e,t,n){e=r(e),t+="";var i=e.length;return n=typeof n=="undefined"?i:cs(0>n?0:+n||0,i),n-=t.length,0<=n&&e.indexOf(t,n)==n},_t.escape=function(e){return(e=r(e))&&ct.test(e)?e.replace(ft,f):e},_t.escapeRegExp=pi,_t.every=_r,_t.find=Pr,_t.findIndex=Sr,_t.findKey=function(e,t,n){return t=ir(t,n,3),hn(e,t,gn,!0)},_t.findLast=function(e,t,n){return t=ir(t,n,3),hn(e,t,fn)},_t.findLastIndex=function(e,t,n){var r=e?e.length:0;for(t=ir(t,n,3);r--;)if(t(e[r],r,e))return r;return-1},_t.findLastKey=function(e,t,n){return t=ir(t,n,3),hn(e,t,yn,!0)},_t.findWhere=function(e,t){return Pr(e,Tn(t))},_t.first=xr,_t.has=function(e,t){return e?Ri.call(e,t):!1},_t.identity=Ei,_t.includes=jr,_t.indexOf=Tr,_t.inRange=function(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=t&&e<n},_t.isArguments=Zr,_t.isArray=js,_t.isBoolean=function(e){return!0===e||!1===e||h(e)&&zi.call(e)==R||!1},_t.isDate=function(e){return h(e)&&zi.call(e)==U||!1},_t.isElement=ei,_t.isEmpty=function(e){if(null==e)return!0;var t=e.length;return cr(t)&&(js(e)||oi(e)||Zr(e)||h(e)&&Is(e.splice))?!t:!Us(e).length},_t.isEqual=function(e,t,n,r){return n=typeof n=="function"&&In(n,r,3),!n&&hr(e)&&hr(t)?e===t:(r=n?n(e,t):b,typeof r=="undefined"?En(e,t,n):!!r)},_t.isError=ti,_t.isFinite=Fs,_t.isFunction=Is,_t.isMatch=function(e,t,n,r){var i=Us(t),s=i.length;if(n=typeof n=="function"&&In(n,r,3),!n&&1==s){var o=i[0];if(r=t[o],hr(r))return null!=e&&r===e[o]&&Ri.call(e,o)}for(var o=Ni(s),u=Ni(s);s--;)r=o[s]=t[i[s]],u[s]=hr(r);return Sn(e,i,o,u,n)},_t.isNaN=function(e){return ii(e)&&e!=+e},_t.isNative=ri,_t.isNull=function(e){return null===e},_t.isNumber=ii,_t.isObject=ni,_t.isPlainObject=qs,_t.isRegExp=si,_t.isString=oi,_t.isTypedArray=ui,_t.isUndefined=function(e){return typeof e=="undefined"},_t.kebabCase=Xs,_t.last=Nr,_t.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(typeof n=="number")i=(0>n?ls(r+n,0):cs(n||0,r-1))+1;else if(n)return i=jn(e,t,!0)-1,e=e[i],(t===t?t===e:e!==e)?i:-1;if(t!==t)return c(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},_t.max=Js,_t.min=Ks,_t.noConflict=function(){return p._=Wi,this},_t.noop=Ti,_t.now=Ps,_t.pad=function(e,t,n){e=r(e),t=+t;var i=e.length;return i<t&&as(t)?(i=(t-i)/2,t=Qi(i),i=Ji(i),n=Gn("",i,n),n.slice(0,t)+e+n):e},_t.padLeft=function(e,t,n){return(e=r(e))&&Gn(e,t,n)+e},_t.padRight=function(e,t,n){return(e=r(e))&&e+Gn(e,t,n)},_t.parseInt=di,_t.random=function(e,t,n){n&&lr(e,t,n)&&(t=n=null);var r=null==e,i=null==t;return null==n&&(i&&typeof e=="boolean"?(n=e,e=1):typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=vs(),cs(e+n*(t-e+parseFloat("1e-"+((n+"").length-1))),t)):Ln(e,t)},_t.reduce=Ir,_t.reduceRight=qr,_t.repeat=vi,_t.result=function(e,t,n){return t=null==e?b:e[t],typeof t=="undefined"&&(t=n),Is(t)?t.call(e):t},_t.runInContext=y,_t.size=function(e){var t=e?e.length:0;return cr(t)?t:Us(e).length},_t.snakeCase=Vs,_t.some=zr,_t.sortedIndex=function(e,t,n,r){var i=ir(n);return i===rn&&null==n?jn(e,t):Fn(e,t,i(n,r,1))},_t.sortedLastIndex=function(e,t,n,r){var i=ir(n);return i===rn&&null==n?jn(e,t,!0):Fn(e,t,i(n,r,1),!0)},_t.startCase=$s,_t.startsWith=function(e,t,n){return e=r(e),n=null==n?0:cs(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n},_t.sum=function(e){js(e)||(e=gr(e));for(var t=e.length,n=0;t--;)n+=+e[t]||0;return n},_t.template=function(e,t,n){var i=_t.templateSettings;n&&lr(e,t,n)&&(t=n=null),e=r(e),t=en(en({},n||t),i,Zt),n=en(en({},t.imports),i.imports,Zt);var s,o,u=Us(n),a=Hn(n,u),f=0;n=t.interpolate||Et;var c="__p+='";n=_i((t.escape||Et).source+"|"+n.source+"|"+(n===dt?vt:Et).source+"|"+(t.evaluate||Et).source+"|$","g");var h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,i,u,a){return r||(r=i),c+=e.slice(f,a).replace(Nt,l),n&&(s=!0,c+="'+__e("+n+")+'"),u&&(o=!0,c+="';"+u+";\n__p+='"),r&&(c+="'+((__t=("+r+"))==null?'':__t)+'"),f=a+t.length,t}),c+="';",(t=t.variable)||(c="with(obj){"+c+"}"),c=(o?c.replace(st,""):c).replace(ot,"$1").replace(ut,"$1;"),c="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(s?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",t=yi(function(){return Li(u,h+"return "+c).apply(b,a)}),t.source=c,ti(t))throw t;return t},_t.trim=mi,_t.trimLeft=function(e,t,n){var i=e;return(e=r(e))?e.slice((n?lr(i,t,n):null==t)?v(e):s(e,t+"")):e},_t.trimRight=function(e,t,n){var i=e;return(e=r(e))?(n?lr(i,t,n):null==t)?e.slice(0,m(e)+1):e.slice(0,o(e,t+"")+1):e},_t.trunc=function(e,t,n){n&&lr(e,t,n)&&(t=null);var i=O;if(n=M,null!=t)if(ni(t)){var s="separator"in t?t.separator:s,i="length"in t?+t.length||0:i;n="omission"in t?r(t.omission):n}else i=+t||0;if(e=r(e),i>=e.length)return e;if(i-=n.length,1>i)return n;if(t=e.slice(0,i),null==s)return t+n;if(si(s)){if(e.slice(i).search(s)){var o,u=e.slice(0,i);for(s.global||(s=_i(s.source,(mt.exec(s)||"")+"g")),s.lastIndex=0;e=s.exec(u);)o=e.index;t=t.slice(0,null==o?i:o)}}else e.indexOf(s,i)!=i&&(s=t.lastIndexOf(s),-1<s&&(t=t.slice(0,s)));return t+n},_t.unescape=function(e){return(e=r(e))&&lt.test(e)?e.replace(at,g):e},_t.uniqueId=function(e){var t=++Ui;return r(e)+t},_t.words=gi,_t.all=_r,_t.any=zr,_t.contains=jr,_t.detect=Pr,_t.foldl=Ir,_t.foldr=qr,_t.head=xr,_t.include=jr,_t.inject=Ir,xi(_t,function(){var e={};return gn(_t,function(t,n){_t.prototype[n]||(e[n]=t)}),e}(),!1),_t.sample=Rr,_t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return Rr(t,e)}):Rr(this.value())},_t.VERSION=w,Ut("bind bindKey curry curryRight partial partialRight".split(" "),function(e){_t[e].placeholder=_t}),Ut(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=B,r=t==P;Ht.prototype[e]=function(e,i){var s=this.__filtered__,o=s&&r?new Ht(this):this.clone();return(o.__iteratees__||(o.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:ir(e,i,1),limit:-1,type:t}),o.__filtered__=s||n,o}}),Ut(["drop","take"],function(e,t){var n=e+"While";Ht.prototype[e]=function(n){var r=this.__filtered__,i=r&&!t?this.dropWhile():this.clone();return n=null==n?1:ls(Qi(n)||0,0),r?t?i.__takeCount__=cs(i.__takeCount__,n):Nr(i.__iteratees__).limit=n:(i.__views__||(i.__views__=[])).push({size:n,type:e+(0>i.__dir__?"Right":"")}),i},Ht.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Ht.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),Ut(["first","last"],function(e,t){var n="take"+(t?"Right":"");Ht.prototype[e]=function(){return this[n](1).value()[0]}}),Ut(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Ht.prototype[e]=function(){return this[n](1)}}),Ut(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Tn:kn;Ht.prototype[e]=function(e){return this[n](r(e))}}),Ht.prototype.compact=function(){return this.filter(Ei)},Ht.prototype.reject=function(e,t){return e=ir(e,t,1),this.filter(function(t){return!e(t)})},Ht.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=0>e?this.takeRight(-e):this.drop(e);return typeof t!="undefined"&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Ht.prototype.toArray=function(){return this.drop(0)},gn(Ht.prototype,function(e,t){var n=_t[t],r=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t);_t.prototype[t]=function(){function t(e){return e=[e],Yi.apply(e,s),n.apply(_t,e)}var s=arguments,o=this.__chain__,u=this.__wrapped__,a=!!this.__actions__.length,f=u instanceof Ht,l=s[0],c=f||js(u);return c&&r&&typeof l=="function"&&1!=l.length&&(f=c=!1),f=f&&!a,i&&!o?f?e.call(u):n.call(_t,this.value()):c?(u=e.apply(f?u:new Ht(this),s),i||!a&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:Mr,args:[t],thisArg:_t}),new Pt(u,o)):this.thru(t)}}),Ut("concat join pop push replace shift sort splice split unshift".split(" "),function(e){var t=(/^(?:replace|split)$/.test(e)?ji:Hi)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);_t.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),Ht.prototype.clone=function(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new Ht(this.__wrapped__);return r.__actions__=e?It(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?It(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?It(n):null,r},Ht.prototype.reverse=function(){if(this.__filtered__){var e=new Ht(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},Ht.prototype.value=function(){var e=this.__wrapped__.value();if(!js(e))return Bn(e,this.__actions__);var t,n=this.__dir__,r=0>n;t=e.length;for(var i=this.__views__,s=0,o=-1,u=i?i.length:0;++o<u;){var a=i[o],f=a.size;switch(a.type){case"drop":s+=f;break;case"dropRight":t-=f;break;case"take":t=cs(t,s+f);break;case"takeRight":s=ls(s,t-f)}}t={start:s,end:t},i=t.start,s=t.end,t=s-i,i=r?s:i-1,s=cs(t,this.__takeCount__),u=(o=this.__iteratees__)?o.length:0,a=0,f=[];e:for(;t--&&a<s;){for(var i=i+n,l=-1,c=e[i];++l<u;){var h=o[l],p=h.iteratee,d=h.type;if(d==P){if(h.done&&(r?i>h.index:i<h.index)&&(h.count=0,h.done=!1),h.index=i,!(h.done||(d=h.limit,h.done=-1<d?h.count++>=d:!p(c))))continue e}else if(h=p(c),d==B)c=h;else if(!h){if(d==H)continue e;break e}}f[a++]=c}return f},_t.prototype.chain=function(){return Or(this)},_t.prototype.commit=function(){return new Pt(this.value(),this.__chain__)},_t.prototype.plant=function(e){for(var t,n=this;n instanceof Dt;){var r=br(n);t?i.__wrapped__=r:t=r;var i=r,n=n.__wrapped__}return i.__wrapped__=e,t},_t.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Ht?(this.__actions__.length&&(e=new Ht(this)),new Pt(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})},_t.prototype.toString=function(){return this.value()+""},_t.prototype.run=_t.prototype.toJSON=_t.prototype.valueOf=_t.prototype.value=function(){return Bn(this.__wrapped__,this.__actions__)},_t.prototype.collect=_t.prototype.map,_t.prototype.head=_t.prototype.first,_t.prototype.select=_t.prototype.filter,_t.prototype.tail=_t.prototype.rest,_t}var b,w="3.5.0",E=1,S=2,x=4,T=8,N=16,C=32,k=64,L=128,A=256,O=30,M="...",_=150,D=16,P=0,H=1,B=2,j="Expected a function",F="__lodash_placeholder__",I="[object Arguments]",q="[object Array]",R="[object Boolean]",U="[object Date]",z="[object Error]",W="[object Function]",X="[object Number]",V="[object Object]",$="[object RegExp]",J="[object String]",K="[object ArrayBuffer]",Q="[object Float32Array]",G="[object Float64Array]",Y="[object Int8Array]",Z="[object Int16Array]",et="[object Int32Array]",tt="[object Uint8Array]",nt="[object Uint8ClampedArray]",rt="[object Uint16Array]",it="[object Uint32Array]",st=/\b__p\+='';/g,ot=/\b(__p\+=)''\+/g,ut=/(__e\(.*?\)|\b__t\))\+'';/g,at=/&(?:amp|lt|gt|quot|#39|#96);/g,ft=/[&<>"'`]/g,lt=RegExp(at.source),ct=RegExp(ft.source),ht=/<%-([\s\S]+?)%>/g,pt=/<%([\s\S]+?)%>/g,dt=/<%=([\s\S]+?)%>/g,vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mt=/\w*$/,gt=/^\s*function[ \n\r\t]+\w/,yt=/^0[xX]/,bt=/^\[object .+?Constructor\]$/,wt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Et=/($^)/,St=/[.*+?^${}()|[\]\/\\]/g,xt=RegExp(St.source),Tt=/\bthis\b/,Nt=/['\n\r\u2028\u2029\\]/g,Ct=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),kt=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Lt="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window WinRTError".split(" "),At={};At[Q]=At[G]=At[Y]=At[Z]=At[et]=At[tt]=At[nt]=At[rt]=At[it]=!0,At[I]=At[q]=At[K]=At[R]=At[U]=At[z]=At[W]=At["[object Map]"]=At[X]=At[V]=At[$]=At["[object Set]"]=At[J]=At["[object WeakMap]"]=!1;var Ot={};Ot[I]=Ot[q]=Ot[K]=Ot[R]=Ot[U]=Ot[Q]=Ot[G]=Ot[Y]=Ot[Z]=Ot[et]=Ot[X]=Ot[V]=Ot[$]=Ot[J]=Ot[tt]=Ot[nt]=Ot[rt]=Ot[it]=!0,Ot[z]=Ot[W]=Ot["[object Map]"]=Ot["[object Set]"]=Ot["[object WeakMap]"]=!1;var Mt={leading:!1,maxWait:0,trailing:!1},_t={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Pt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ht={"function":!0,object:!0},Bt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jt=Ht[typeof exports]&&exports&&!exports.nodeType&&exports,Ft=Ht[typeof module]&&module&&!module.nodeType&&module,Ht=Ht[typeof window]&&window,It=Ft&&Ft.exports===jt&&jt,qt=jt&&Ft&&typeof global=="object"&&global||Ht!==(this&&this.window)&&Ht||this,Rt=y();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(qt._=Rt,define("lodash",[],function(){return Rt})):jt&&Ft?It?(Ft.exports=Rt)._=Rt:jt._=Rt:qt._=Rt}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("libraries/hoodie-admin",["require"],function(e){return top.hoodieAdmin}),define("libraries/config",["require","lodash","./hoodie-admin"],function(e){var t=e("lodash"),n=e("./hoodie-admin"),r=function(){function o(){var t={_id:e,config:s};return i&&(t._rev=i),t}function u(e){return function(t){return i=t.rev||t._rev,e?s[e]||!1:s}}function a(e){return s[e]&&t.cloneDeep(s[e])}function f(e){var t=n.request("GET",r).then(function(e){return s=e.config||{},e}).then(u(e));return t}function l(e,t){var i,s=o();return s.config[e]=t,i=n.request("PUT",r,{data:JSON.stringify(s)}),i=i.then(u(e)),i}var e="plugin/hoodie-plugin-imagine",r="/plugins/"+encodeURIComponent(e),i="",s={};return{get:f,set:l,getCached:a}}();return r}),define("libraries/backbone-sync",["require","lodash","backbone","./config"],function(e){function i(){var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-",n="",r;for(r=0;r<10;r++)n+=e[t.random(e.length)];return n}var t=e("lodash"),n=e("backbone"),r=e("./config");n.sync=function(e,n,s){var o=t.omit(n.toJSON(),"id"),u=n.id,a=n.type,f=t.has(n,"models"),l,c,h,p,d;f?c=n:l=n,s=s||{};switch(e){case"read":d=r.get(a).then(function(e){return f?e||[]:e||{}});break;case"create":case"update":a==="general"?d=r.set(a,o):f||(l.isNew()&&l.set("id",i()),h=r.getCached(a)||[],p=t.findIndex(h,{id:l.id}),p===-1?h.push(l.toJSON()):h[p]=l.toJSON(),d=r.set(a,h));break;case"delete":f||(h=r.getCached(a)||[],p=t.findIndex(h,{id:l.id}),p>-1&&h.splice(p,1),d=r.set(a,h))}return s.success&&d.done(function(e){a!=="general"&&!f&&(e=t.find(e,{id:u})),s.success.call(n,e)}),s.error&&d.fail(s.error),d}}),define("settings/general/view",["require","lodash","jquery","libraries/hoodie-admin","libraries/config","backbone"],function(e){var t=e("lodash"),n=e("jquery"),r=e("libraries/hoodie-admin"),i=e("libraries/config"),s=e("backbone"),o=s.View.extend({ui:{$inputDirectory:'input[name="directory"]',$checkboxResize:'input[name="client-resize"]',$inputWidth:'input[name="resize-width"]',$inputHeight:'input[name="resize-height"]'},events:{'ifToggled input[name="client-resize"]':"updateClientResize",submit:"handleSubmit"},updateClientResize:function(e){var t=this,n=e.target.checked;t.ui.$inputWidth.prop("disabled",!n),t.ui.$inputHeight.prop("disabled",!n)},handleSubmit:function(e){e.preventDefault();var t=this,n={directory:t.ui.$inputDirectory.val(),clientResize:!1};t.ui.$checkboxResize.is(":checked")&&(n.clientResize=[parseInt(t.ui.$inputWidth.val(),10),parseInt(t.ui.$inputHeight.val(),10)]),t.model.set(n),t.model.save()},render:function(){var e=this,t=e.model;e.ui.$inputDirectory.val(t.get("directory"));var n=t.get("clientResize");return e.ui.$checkboxResize.iCheck(n?"check":"uncheck"),n?(e.ui.$inputWidth.val(n[0]),e.ui.$inputHeight.val(n[1])):(e.ui.$inputWidth.val(""),e.ui.$inputHeight.val("")),e},initialize:function(){var e=this;t.each(e.ui,function(t,n){e.ui[n]=e.$el.find(t)}),e.listenTo(e.model,"change",e.render)}});return o}),define("settings/general/model",["require","lodash","backbone"],function(e){var t=e("lodash"),n=e("backbone"),r=n.Model.extend({defaults:{directory:"",clientResize:[1e3,1e3]},type:"general",initialize:function(){}});return r}),define("settings/groups/model",["require","lodash","backbone"],function(e){var t=e("lodash"),n=e("backbone"),r=n.Model.extend({defaults:function(){return{name:"","public":!1,verify:"after",types:[]}},type:"groups",initialize:function(){}});return r}),define("settings/groups/view",["require","lodash","jquery","backbone","./model"],function(e){var t=e("lodash"),n=e("jquery"),r=e("backbone"),i=e("./model"),s=r.View.extend({ui:{$selectGroup:"#group",$inputName:"#group-name",$checkboxPublic:"#group-public",$radioVerifyBefore:"#group-verify-before",$radioVerifyAfter:"#group-verify-after",$selectTypes:"#group-types",$error:".error"},events:{"change #group":"changeModel",submit:"handleSubmit","click .btn.remove":"handleRemove"},showError:function(e){var n=this;n.ui.$error.html("<span>"+e+"</span>").addClass("show"),n.errorTimer&&clearTimeout(n.errorTimer),n.errorTimer=t.delay(function(){n.ui.$error.removeClass("show")},3e3)},handleRemove:function(e){e.preventDefault();var t=this,n=t.model;n.isNew()?n.clear():window.confirm('Are you sure to you want to remove the group "'+n.get("name")+'"? You should never do this in production!')&&n.destroy()},modelDestroyed:function(e){var t=this;e.id===t.model.id&&(t.model=new i({}),t.render()),t.updateGroup()},changeModel:function(e){e.preventDefault();var t=this,n=t.ui.$selectGroup.val();!n||!t.collection.get(n)?t.model=new i({}):t.model=t.collection.get(n),t.render()},checkNameUnique:function(e){var t=this;return t.collection.find(function(t){return e.id!==t.id&&e.get("name")===t.get("name")})},handleSubmit:function(e){e.preventDefault();var n=this,r=n.model,i=t.extend(t.result(r,"defaults"),n.$el.serializeObject().group,{types:n.ui.$selectTypes.select2("val")}),s=n.model.isNew();r.set(i);if(n.checkNameUnique(r))return n.showError("name not unique"),!1;r.save({},{error:function(){console.error(arguments),n.showError("could not save model")},success:function(){s&&n.collection.add(r)}})},updateGroup:function(){var e=this,t=[];e.collection.each(function(e){t.push({id:e.id||e.cid,text:e.get("name")})}),e.updateGroupElement(t,e.model.id)},updateTypesElement:function(e){var t=this;e=e||[],this.ui.$selectTypes.select2({placeholder:"Choose Types",minimumResultsForSearch:Infinity,data:e,multiple:!0,tags:!0}),t.ui.$selectTypes.select2("val",t.model.get("types"))},updateGroupElement:function(e,t){var n=this;e=e||[],e.unshift({id:0,text:"Add Group"}),this.ui.$selectGroup.select2({placeholder:"Choose Group",minimumResultsForSearch:Infinity,data:e}),t&&n.ui.$selectGroup.select2("val",t)},render:function(){var e=this,t=e.model;return e.ui.$inputName.val(t.get("name")),e.ui.$checkboxPublic.iCheck(t.get("public")?"check":"uncheck"),t.get("verify")==="before"?e.ui.$radioVerifyBefore.iCheck("check"):e.ui.$radioVerifyAfter.iCheck("check"),e.ui.$selectTypes.select2("val",t.get("types")),e},initialize:function(){var e=this;t.each(e.ui,function(t,n){e.ui[n]=e.$el.find(t)}),e.updateGroupElement(),e.updateTypesElement(),e.listenTo(e.model,"change",e.render),e.listenTo(e.collection,"destroy",e.modelDestroyed),e.listenTo(e.collection,"sync",e.updateGroup)}});return s}),define("settings/groups/collection",["require","lodash","backbone","./model"],function(e){var t=e("lodash"),n=e("backbone"),r=e("./model"),i=n.Collection.extend({model:r,type:"groups",initialize:function(){}});return i}),function(e){"use strict";typeof define=="function"&&define.amd?define("sortable",e):typeof module!="undefined"&&typeof module.exports!="undefined"?module.exports=e():typeof Package!="undefined"?Sortable=e():window.Sortable=e()}(function(){"use strict";function L(e,t){this.el=e,this.options=t=t||{};var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1};for(var r in n)!(r in t)&&(t[r]=n[r]);var i=t.group;if(!i||typeof i!="object")i=t.group={name:i};["pull","put"].forEach(function(e){e in i||(i[e]=!0)}),S.forEach(function(n){t[n]=O(this,t[n]||x),D(e,n.substr(2).toLowerCase(),t[n])},this),t.groups=" "+i.name+(i.put.join?" "+i.put.join(" "):"")+" ",e[v]=t;for(var s in this)s.charAt(0)==="_"&&(this[s]=O(this,this[s]));D(e,"mousedown",this._onTapStart),D(e,"touchstart",this._onTapStart),D(e,"dragover",this),D(e,"dragenter",this),C.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function A(t){n&&n.state!==t&&(B(n,"display",t?"none":""),!t&&n.state&&r.insertBefore(n,e),n.state=t)}function O(e,t){var n=N.call(arguments,2);return t.bind?t.bind.apply(t,[e].concat(n)):function(){return t.apply(e,n.concat(N.call(arguments)))}}function M(e,t,n){if(e){n=n||g,t=t.split(".");var r=t.shift().toUpperCase(),i=new RegExp("\\s("+t.join("|")+")\\s","g");do if(r===">*"&&e.parentNode===n||(r===""||e.nodeName.toUpperCase()==r)&&(!t.length||((" "+e.className+" ").match(i)||[]).length==t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function _(e){e.dataTransfer.dropEffect="move",e.preventDefault()}function D(e,t,n){e.addEventListener(t,n,!1)}function P(e,t,n){e.removeEventListener(t,n,!1)}function H(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(/\s+/g," ").replace(" "+t+" ","");e.className=r+(n?" "+t:"")}}function B(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return g.defaultView&&g.defaultView.getComputedStyle?n=g.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];t in r||(t="-webkit-"+t),r[t]=n+(typeof n=="string"?"":"px")}}function j(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function F(e){e.draggable=!1}function I(){w=!1}function q(e,t){var n=e.lastElementChild,r=n.getBoundingClientRect();return t.clientY-(r.top+r.height)>5&&n}function R(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;while(n--)r+=t.charCodeAt(n);return r.toString(36)}function U(e){var t=0;while(e&&(e=e.previousElementSibling))e.nodeName.toUpperCase()!=="TEMPLATE"&&t++;return t}function z(e,t){var n,r;return function(){n===void 0&&(n=arguments,r=this,setTimeout(function(){n.length===1?e.call(r,n[0]):e.apply(r,n),n=void 0},t))}}var e,t,n,r,i,s,o,u,a,f,l,c,h={},p,d,v="Sortable"+(new Date).getTime(),m=window,g=m.document,y=m.parseInt,b="draggable"in g.createElement("div"),w=!1,E=function(e,t,r,i,s,o){var u=g.createEvent("Event");u.initEvent(t,!0,!0),u.item=r||e,u.from=i||e,u.clone=n,u.oldIndex=s,u.newIndex=o,e.dispatchEvent(u)},S="onAdd onUpdate onRemove onStart onEnd onFilter onSort".split(" "),x=function(){},T=Math.abs,N=[].slice,C=[],k=z(function(e,t,n){if(n&&t.scroll){var r,i,u=t.scrollSensitivity,a=t.scrollSpeed,f=e.clientX,l=e.clientY,c=window.innerWidth,p=window.innerHeight,d,v;if(o!==n){s=t.scroll,o=n;if(s===!0){s=n;do if(s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight)break;while(s=s.parentNode)}}s&&(r=s,i=s.getBoundingClientRect(),d=(T(i.right-f)<=u)-(T(i.left-f)<=u),v=(T(i.bottom-l)<=u)-(T(i.top-l)<=u)),!d&&!v&&(d=(c-f<=u)-(f<=u),v=(p-l<=u)-(l<=u),(d||v)&&(r=m));if(h.vx!==d||h.vy!==v||h.el!==r)h.el=r,h.vx=d,h.vy=v,clearInterval(h.pid),r&&(h.pid=setInterval(function(){r===m?m.scrollTo(m.scrollX+d*a,m.scrollY+v*a):(v&&(r.scrollTop+=v*a),d&&(r.scrollLeft+=d*a))},24))}},30);return L.prototype={constructor:L,_dragStarted:function(){r&&e&&(H(e,this.options.ghostClass,!0),L.active=this,E(r,"start",e,r,f))},_onTapStart:function(t){var n=t.type,s=t.touches&&t.touches[0],o=(s||t).target,u=o,a=this.options,l=this.el,h=a.filter;if(n==="mousedown"&&t.button!==0||a.disabled)return;o=M(o,a.draggable,l);if(!o)return;f=U(o);if(typeof h=="function"){if(h.call(this,t,o,this)){E(u,"filter",o,l,f),t.preventDefault();return}}else if(h){h=h.split(",").some(function(e){e=M(u,e.trim(),l);if(e)return E(e,"filter",o,l,f),!0});if(h){t.preventDefault();return}}if(a.handle&&!M(u,a.handle,l))return;if(o&&!e&&o.parentNode===l){p=t,r=this.el,e=o,i=e.nextSibling,c=this.options.group,e.draggable=!0,a.ignore.split(",").forEach(function(e){j(o,e.trim(),F)}),s&&(p={target:o,clientX:s.clientX,clientY:s.clientY},this._onDragStart(p,"touch"),t.preventDefault()),D(g,"mouseup",this._onDrop),D(g,"touchend",this._onDrop),D(g,"touchcancel",this._onDrop),D(e,"dragend",this),D(r,"dragstart",this._onDragStart),b||this._onDragStart(p,!0);try{g.selection?g.selection.empty():window.getSelection().removeAllRanges()}catch(d){}}},_emulateDragOver:function(){if(d){B(t,"display","none");var e=g.elementFromPoint(d.clientX,d.clientY),n=e,r=" "+this.options.group.name+"",i=C.length;if(n)do{if(n[v]&&n[v].groups.indexOf(r)>-1){while(i--)C[i]({clientX:d.clientX,clientY:d.clientY,target:e,rootEl:n});break}e=n}while(n=n.parentNode);B(t,"display","")}},_onTouchMove:function(e){if(p){var n=e.touches?e.touches[0]:e,r=n.clientX-p.clientX,i=n.clientY-p.clientY,s=e.touches?"translate3d("+r+"px,"+i+"px,0)":"translate("+r+"px,"+i+"px)";d=n,B(t,"webkitTransform",s),B(t,"mozTransform",s),B(t,"msTransform",s),B(t,"transform",s),e.preventDefault()}},_onDragStart:function(i,s){var o=i.dataTransfer,u=this.options;this._offUpEvents(),c.pull=="clone"&&(n=e.cloneNode(!0),B(n,"display","none"),r.insertBefore(n,e));if(s){var a=e.getBoundingClientRect(),f=B(e),l;t=e.cloneNode(!0),B(t,"top",a.top-y(f.marginTop,10)),B(t,"left",a.left-y(f.marginLeft,10)),B(t,"width",a.width),B(t,"height",a.height),B(t,"opacity","0.8"),B(t,"position","fixed"),B(t,"zIndex","100000"),r.appendChild(t),l=t.getBoundingClientRect(),B(t,"width",a.width*2-l.width),B(t,"height",a.height*2-l.height),s==="touch"?(D(g,"touchmove",this._onTouchMove),D(g,"touchend",this._onDrop),D(g,"touchcancel",this._onDrop)):(D(g,"mousemove",this._onTouchMove),D(g,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,150)}else o&&(o.effectAllowed="move",u.setData&&u.setData.call(this,o,e)),D(g,"drop",this);setTimeout(this._dragStarted,0)},_onDragOver:function(s){var o=this.el,f,l,h,p=this.options,d=p.group,m=d.put,g=c===d,y=p.sort;if(!e)return;s.preventDefault!==void 0&&(s.preventDefault(),!p.dragoverBubble&&s.stopPropagation());if(c&&!p.disabled&&(g?y||(h=!r.contains(e)):c.pull&&m&&(c.name===d.name||m.indexOf&&~m.indexOf(c.name)))&&(s.rootEl===void 0||s.rootEl===this.el)){k(s,p,this.el);if(w)return;f=M(s.target,p.draggable,o),l=e.getBoundingClientRect();if(h){A(!0),n||i?r.insertBefore(e,n||i):y||r.appendChild(e);return}if(o.children.length===0||o.children[0]===t||o===s.target&&(f=q(o,s))){if(f){if(f.animated)return;b=f.getBoundingClientRect()}A(g),o.appendChild(e),this._animate(l,e),f&&this._animate(b,f)}else if(f&&!f.animated&&f!==e&&f.parentNode[v]!==void 0){u!==f&&(u=f,a=B(f));var b=f.getBoundingClientRect(),E=b.right-b.left,S=b.bottom-b.top,x=/left|right|inline/.test(a.cssFloat+a.display),T=f.offsetWidth>e.offsetWidth,N=f.offsetHeight>e.offsetHeight,C=(x?(s.clientX-b.left)/E:(s.clientY-b.top)/S)>.5,L=f.nextElementSibling,O;w=!0,setTimeout(I,30),A(g),x?O=f.previousElementSibling===e&&!T||C&&T:O=L!==e&&!N||C&&N,O&&!L?o.appendChild(e):f.parentNode.insertBefore(e,O?L:f),this._animate(l,e),this._animate(b,f)}}},_animate:function(e,t){var n=this.options.animation;if(n){var r=t.getBoundingClientRect();B(t,"transition","none"),B(t,"transform","translate3d("+(e.left-r.left)+"px,"+(e.top-r.top)+"px,0)"),t.offsetWidth,B(t,"transition","all "+n+"ms"),B(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){B(t,"transition",""),B(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){P(g,"mouseup",this._onDrop),P(g,"touchmove",this._onTouchMove),P(g,"touchend",this._onDrop),P(g,"touchcancel",this._onDrop)},_onDrop:function(v){var m=this.el,y=this.options;clearInterval(this._loopId),clearInterval(h.pid),P(g,"drop",this),P(g,"mousemove",this._onTouchMove),P(m,"dragstart",this._onDragStart),this._offUpEvents(),v&&(v.preventDefault(),!y.dropBubble&&v.stopPropagation(),t&&t.parentNode.removeChild(t),e&&(P(e,"dragend",this),F(e),H(e,this.options.ghostClass,!1),r!==e.parentNode?(l=U(e),E(e.parentNode,"sort",e,r,f,l),E(r,"sort",e,r,f,l),E(e,"add",e,r,f,l),E(r,"remove",e,r,f,l)):(n&&n.parentNode.removeChild(n),e.nextSibling!==i&&(l=U(e),E(r,"update",e,r,f,l),E(r,"sort",e,r,f,l))),L.active&&E(r,"end",e,r,f,l)),r=e=t=i=n=s=o=p=d=u=a=c=L.active=null,this.save())},handleEvent:function(e){var t=e.type;t==="dragover"||t==="dragenter"?(this._onDragOver(e),_(e)):(t==="drop"||t==="dragend")&&this._onDrop(e)},toArray:function(){var e=[],t,n=this.el.children,r=0,i=n.length;for(;r<i;r++)t=n[r],M(t,this.options.draggable,this.el)&&e.push(t.getAttribute("data-id")||R(t));return e},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,r){var i=n.children[r];M(i,this.options.draggable,n)&&(t[e]=i)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return M(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];n[e]=t},destroy:function(){var e=this.el,t=this.options;S.forEach(function(n){P(e,n.substr(2).toLowerCase(),t[n])}),P(e,"mousedown",this._onTapStart),P(e,"touchstart",this._onTapStart),P(e,"dragover",this),P(e,"dragenter",this),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),C.splice(C.indexOf(this._onDragOver),1),this._onDrop(),this.el=null}},L.utils={on:D,off:P,css:B,find:j,bind:O,is:function(e,t){return!!M(e,t,e)},throttle:z,closest:M,toggleClass:H,dispatchEvent:E,index:U},L.version="1.1.1",L.create=function(e,t){return new L(e,t)},L}),define("settings/types/model",["require","lodash","backbone"],function(e){var t=e("lodash"),n=e("backbone"),r=n.Model.extend({defaults:function(){return{name:"",resize:!1,method:"contain",format:!1,quality:90,filters:[]}},type:"types",initialize:function(){}});return r}),define("settings/types/view",["require","lodash","jquery","sortable","backbone","./model"],function(e){var t=e("lodash"),n=e("jquery"),r=e("sortable"),i=e("backbone"),s=e("./model"),o=i.View.extend({filterTemplate:t.template('<li><input type="text" class="form-control" name="type[filters][][command]" placeholder="command" value="<%= command %>"><input type="text" class="form-control" name="type[filters][][arguments]" placeholder="arg, ume, nts" value="<%= arguments %>"><div class="btn move-filter">Move</div><button class="btn careful remove-filter">Remove</button></li>'),ui:{$selectType:"#type",$inputName:"#type-name",$checkboxResize:"#type-resize",$inputResizeWidth:"#type-resize-width",$inputResizeHeight:"#type-resize-height",$radioResizeMethod:'[name="type[method]"]',$radioFormat:'input[name="type[format]"]',$inputQuality:"#type-quality",$outputQuality:"#type-quality-output",$filterList:".filters-container .filters",$error:".error"},events:{"input #type-quality":"updateQuality","change #type":"changeModel","ifToggled #type-resize":"handleCheckResize",submit:"handleSubmit","click .btn.remove":"handleRemove","click .btn.remove-filter":"removeFilter","click .btn.add-filter":"addFilter"},showError:function(e){var n=this;n.ui.$error.html("<span>"+e+"</span>").addClass("show"),n.errorTimer&&clearTimeout(n.errorTimer),n.errorTimer=t.delay(function(){n.ui.$error.removeClass("show")},3e3)},removeFilter:function(e){e.preventDefault();var t=this,r=n(e.currentTarget);r.parent().remove()},addFilter:function(e){e.preventDefault();var t=this;t.ui.$filterList.append(t.filterTemplate({command:"",arguments:""}))},updateQuality:function(e){e.preventDefault();var t=this;t.ui.$outputQuality.val(t.ui.$inputQuality.val())},handleCheckResize:function(e){var t=this,n=e.target.checked;t.ui.$inputResizeWidth.prop("disabled",!n),t.ui.$inputResizeHeight.prop("disabled",!n),t.ui.$radioResizeMethod.iCheck(n?"enable":"disable")},handleRemove:function(e){e.preventDefault();var t=this,n=t.model;n.isNew()?n.clear():window.confirm('Are you sure you want to remove the type "'+n.get("name")+'"? You should never do this in production!')&&n.destroy()},modelDestroyed:function(e){var t=this;e.id===t.model.id&&(t.model=new s({}),t.render()),t.updateType()},changeModel:function(e){e.preventDefault();var t=this,n=t.ui.$selectType.val();!n||!t.collection.get(n)?t.model=new s({}):t.model=t.collection.get(n),t.render()},checkNameUnique:function(e){var t=this;return t.collection.find(function(t){return e.id!==t.id&&e.get("name")===t.get("name")})},handleSubmit:function(e){e.preventDefault();var n=this,r=n.model,i=t.extend(t.result(r,"defaults"),n.$el.serializeObject().type),s=n.model.isNew();i.resize&&(i.resize=[parseInt(i.resize.width,10),parseInt(i.resize.height,10)]),i.format=i.format||!1,i.quality=parseInt(i.quality,10),i.filters=t.compact(t.map(i.filters,function(e){if(!e.command.length)return!1;var n=e.arguments.split(",");return t.each(n,function(e,r){e=t.trim(e," '\""),e.length&&!isNaN(e)&&(e=t.parseInt(e)),n[r]=e}),{command:e.command,arguments:n}})),r.set(i);if(n.checkNameUnique(r))return n.showError("name not unique"),!1;r.save({},{error:function(){console.error(arguments),n.showError("could not save model")},success:function(){s&&n.collection.add(r)}})},updateType:function(){var e=this,n=[];e.collection.each(function(e){n.push({id:e.id||e.cid,text:e.get("name")})}),e.trigger("updated:types",n),e.updateTypeElement(t.clone(n),e.model.id)},updateTypeElement:function(e,t){var n=this;e=e||[],e.unshift({id:0,text:"Add Type"}),this.ui.$selectType.select2({placeholder:"Choose Type",minimumResultsForSearch:Infinity,data:e}),t&&n.ui.$selectType.select2("val",t)},render:function(){var e=this,n=e.model,r=[];return e.ui.$inputName.val(n.get("name")),e.ui.$checkboxResize.iCheck(n.get("resize")?"check":"uncheck"),n.get("resize")?(e.ui.$inputResizeWidth.val(n.get("resize")[0]),e.ui.$inputResizeHeight.val(n.get("resize")[1])):(e.ui.$inputResizeWidth.val(""),e.ui.$inputResizeHeight.val("")),e.ui.$inputResizeWidth.prop("disabled",!n.get("resize")),e.ui.$inputResizeHeight.prop("disabled",!n.get("resize")),e.ui.$radioResizeMethod.iCheck(n.get("resize")?"enable":"disable"),e.ui.$radioResizeMethod.filter('[value="'+n.get("method")+'"]').iCheck("check"),e.ui.$radioFormat.filter('[value="'+n.get("format")+'"]').iCheck("check"),e.ui.$inputQuality.val(n.get("quality")),e.ui.$outputQuality.val(n.get("quality")),r=t.map(n.get("filters"),function(n){var r=t.isArray(n.arguments)?n.arguments:[];return e.filterTemplate({command:n.command,arguments:r.join(", ")})}),e.ui.$filterList.html(r.join("")),e},initialize:function(){var e=this;t.each(e.ui,function(t,n){e.ui[n]=e.$el.find(t)}),e.updateTypeElement();var n=r.create(e.ui.$filterList[0],{handle:".move-filter"});e.listenTo(e.model,"change",e.render),e.listenTo(e.collection,"destroy",e.modelDestroyed),e.listenTo(e.collection,"sync",e.updateType)}});return o}),define("settings/types/collection",["require","lodash","backbone","./model"],function(e){var t=e("lodash"),n=e("backbone"),r=e("./model"),i=n.Collection.extend({model:r,type:"types",initialize:function(){}});return i}),define("app",["require","lodash","jquery","settings/general/view","settings/general/model","settings/groups/view","settings/groups/model","settings/groups/collection","settings/types/view","settings/types/model","settings/types/collection"],function(e){var t=e("lodash"),n=e("jquery"),r=e("settings/general/view"),i=e("settings/general/model"),s=e("settings/groups/view"),o=e("settings/groups/model"),u=e("settings/groups/collection"),a=e("settings/types/view"),f=e("settings/types/model"),l=e("settings/types/collection"),c=n("#plugin-imagine"),h=c.find("> .tabs > li"),p=c.find("> .tab-containers > div");c.children(".tabs").on("click","li",function(e){e.preventDefault();var t=n(this);t.hasClass("active")||(h.not(t).removeClass("active"),t.addClass("active"),p.removeClass("active").filter("#"+t.data("tab")).addClass("active"))});var d=new i({id:"general"}),v=new r({model:d,el:c.find("form.general")});d.fetch();var m=new u,g=new s({model:new o({}),collection:m,el:c.find("form.groups")});m.fetch();var y=new l,b=new a({model:new f({}),collection:y,el:c.find("form.types")});y.fetch(),g.listenTo(b,"updated:types",g.updateTypesElement)}),"use strict",require.config({enforceDefine:!0,baseUrl:"assets/scripts/src",paths:{lodash:"../../vendor/lodash/lodash.min",jquery:"libraries/jquery","jquery.serialize-object":"../../vendor/jquery-serialize-object/dist/jquery.serialize-object.min",sortable:"../../vendor/Sortable/Sortable",backbone:"../../vendor/backbone/backbone"},shim:{"jquery.serialize-object":{deps:["jquery"],exports:"$.fn.serializeObject"}},wrapShim:!0,map:{"*":{underscore:"lodash"}}}),require(["jquery.serialize-object","libraries/backbone-sync","app"],function(){}),define("main",function(){})})();